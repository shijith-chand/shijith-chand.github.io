webpackJsonp([1],{0:function(e,t,n){e.exports=n("x35b")},"02wv":function(e,t){e.exports=".errorMessage {\n    margin-top:150px;\n    font-size: 170px;\n    text-align: center;\n}"},"4QKn":function(e,t){e.exports='<div class="container">\n  <div class="row text-center">\n    <div class="col">About Component</div>\n  </div>\n \n</div>'},"5lc3":function(e,t){e.exports=""},"5xMp":function(e,t){e.exports="<app-navigation></app-navigation>\n<router-outlet></router-outlet>\n<app-footer></app-footer>"},"6GLz":function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="6GLz"},"6Xpf":function(e,t){e.exports=""},"7YgM":function(e,t){e.exports={name:"lexweb-nlp",version:"1.4.3",license:"MIT","angular-cli":{},scripts:{ng:"ng",start:"ng serve --port 4300 --env=source",express:"ng build --env=source --watch --progress | node ./bin/www",test:"ng test",pree2e:"webdriver-manager update --standalone false --gecko false",lint:"ng lint",e2e:"ng e2e"},engines:{node:"7.10.0"},private:!0,dependencies:{"@angular/animations":"^4.2.4","@angular/common":"^4.2.4","@angular/compiler":"^4.2.4","@angular/compiler-cli":"^4.2.4","@angular/core":"^4.2.4","@angular/forms":"^4.2.4","@angular/http":"^4.2.4","@angular/platform-browser":"^4.2.4","@angular/platform-browser-dynamic":"^4.2.4","@angular/platform-server":"^4.2.4","@angular/router":"^4.2.4","@types/underscore":"^1.8.0","angular-tree-component":"^4.1.0","angular-webstorage-service":"^1.0.2","angular2-material-datepicker":"^0.5.0","body-parser":"^1.18.2",bootstrap:"^3.3.7",codemirror:"^5.26.0","cookie-parser":"^1.4.3","core-js":"^2.4.1",dynamoose:"^0.8.6",express:"^4.16.2","express-session":"^1.15.6",jquery:"^3.2.1",morgan:"^1.9.0","ng2-codemirror-typescript":"^1.1.1","ng2-completer":"^1.6.3","ng2-cookies":"^1.0.12","ng2-notify-popup":"^0.1.25","ngx-bootstrap":"^1.6.6","ngx-contextmenu":"^1.1.0",passport:"^0.4.0","passport-local":"^1.0.0","popper.js":"^1.14.1",rxjs:"^5.4.2","serve-favicon":"^2.5.0",tether:"^1.4.3","ts-clipboard":"^1.0.15","ts-helpers":"^1.1.1",underscore:"^1.8.3",winston:"^3.0.0-rc1","zone.js":"^0.8.14"},devDependencies:{"@angular/cli":"^1.4.9","@angular/compiler-cli":"^4.2.4","@types/jasmine":"^2.6.2","@types/jasminewd2":"^2.0.3","@types/node":"^6.0.42",codelyzer:"~3.2.0","jasmine-core":"~2.6.2","jasmine-spec-reporter":"~4.1.0",karma:"^1.7.1","karma-chrome-launcher":"^2.1.1","karma-cli":"~1.0.1","karma-coverage-istanbul-reporter":"^1.2.1","karma-jasmine":"~1.1.0","karma-jasmine-html-reporter":"^0.2.2",protractor:"~5.1.2","ts-node":"~3.2.0",tslint:"~5.7.0",typescript:"^2.3.3"}}},"8yE1":function(e,t){e.exports=""},"9OPk":function(e,t){e.exports=".panel-heading {\n  color: #fff !important; }\n\n.auto-topic-model-search-constraint:nth-child(4n+1) .panel-heading {\n  background-color: #661466; }\n\n.auto-topic-model-search-constraint:nth-child(4n+2) .panel-heading {\n  background-color: #991200; }\n\n.auto-topic-model-search-constraint:nth-child(4n+3) .panel-heading {\n  background-color: #ff6704; }\n\n.auto-topic-model-search-constraint:nth-child(4n+4) .panel-heading {\n  background-color: #3466cb; }\n\n.ngx-contextmenu > .dropdown-menu {\n  z-index: 1060 !important; }\n\n.search-model-tree {\n  height: 400px; }\n\n.search-constraint-div {\n  min-width: 100%;\n  min-height: 30px;\n  max-height: 100px;\n  overflow-y: scroll;\n  border-style: solid;\n  border-width: 1px; }\n\n.highlight-found {\n  background-color: yellow; }\n"},"D3Q/":function(e,t){e.exports='<div id="body">\n  <div id="footer">\n    NLP Topic Modelling Tree \n    <div class="hint">click or option-click to expand or collapse</div>\n    <input type="hidden" id="jsonUrl" value="{{serverConfig.apiUrl}}/topicDetection/modelTreeJson">\n  </div>\n</div>\n'},D5WY:function(e,t){e.exports=".decrease-margin {\n  margin-left: -20px !important; }\n\n.email-label {\n  height: 40px;\n  vertical-align: middle;\n  display: table-cell;\n  padding-bottom: 5px; }\n\n.panel-heading {\n  background-color: #f2f2f2; }\n"},D9Yb:function(e,t){e.exports=".CodeMirror {\n  margin-top: 5px;\n  height: 90px !important;\n  border: 1px solid #AFAFAF;\n  border-radius: 5px;\n  color: #333 !important; }\n  .CodeMirror .cm-quote {\n    color: #996699 !important; }\n  .CodeMirror .cm-keyword {\n    color: #a11 !important; }\n  .CodeMirror .cm-token {\n    color: #21a !important;\n    font-weight: bold; }\n  .CodeMirror .cm-def {\n    background-color: #eee !important;\n    color: #333 !important; }\n  .CodeMirror-hints {\n  z-index: 10000 !important;\n  padding-right: 10px; }\n  .modal-body .CodeMirror {\n  height: 225px !important; }\n  .panel-heading .glyphicon {\n  margin: 0 3px; }\n  .panel-heading .glyphicon:hover {\n    opacity: .8;\n    color: #ccc; }\n  .CodeMirror-hint-description {\n  max-width: 25em;\n  opacity: 90;\n  background-color: grey;\n  color: white; }\n  @media (min-width: 768px) {\n  .constraint-modal .modal-dialog {\n    height: calc(100vh - 65px); }\n    .constraint-modal .modal-dialog .modal-content {\n      height: 100%; }\n      .constraint-modal .modal-dialog .modal-content .modal-body {\n        height: calc(100% - 65px); }\n        .constraint-modal .modal-dialog .modal-content .modal-body .CodeMirror {\n          height: calc(100% - 22px) !important; }\n      .constraint-modal .modal-dialog .modal-content .modal-half-height {\n        height: 50%; } }\n"},DFgO:function(e,t){e.exports=".panel-heading {\n  color: #fff !important; }\n\n.app-auto-topic-rule-constraint-thumbnail-wrapper:nth-child(4n+2) .panel-heading {\n  background-color: #661466; }\n\n.app-auto-topic-rule-constraint-thumbnail-wrapper:nth-child(4n+3) .panel-heading {\n  background-color: #991200; }\n\n.app-auto-topic-rule-constraint-thumbnail-wrapper:nth-child(4n+4) .panel-heading {\n  background-color: #ff6704; }\n\n.app-auto-topic-rule-constraint-thumbnail-wrapper:nth-child(4n+5) .panel-heading {\n  background-color: #3466cb; }\n\n.confirm-button-warning {\n  color: #ff6704 !important; }\n"},DpnV:function(e,t){e.exports=".kr-loader {\n  width: 120px; }\n  .kr-loader .one,\n  .kr-loader .two,\n  .kr-loader .three,\n  .kr-loader .four,\n  .kr-loader .five,\n  .kr-loader .six,\n  .kr-loader .seven,\n  .kr-loader .eight,\n  .kr-loader .nine,\n  .kr-loader .ten {\n    width: 8px;\n    height: 5px;\n    background: #006543;\n    margin: 0;\n    display: inline-block;\n    -webkit-box-shadow: 0 0 30px #006543, inset 0 0 5px rgba(255, 255, 255, 0.5);\n    -webkit-animation-duration: 0.7s;\n    -webkit-animation-iteration-count: infinite;\n    -webkit-animation-direction: alternate; }\n  .kr-loader .one {\n    -webkit-animation-name: first; }\n  .kr-loader .two {\n    -webkit-animation-name: second; }\n  .kr-loader .three {\n    -webkit-animation-name: third; }\n  .kr-loader .four {\n    -webkit-animation-name: fourth; }\n  .kr-loader .five {\n    -webkit-animation-name: fifth; }\n  .kr-loader .six {\n    -webkit-animation-name: sixth; }\n  .kr-loader .seven {\n    -webkit-animation-name: seventh; }\n  .kr-loader .eight {\n    -webkit-animation-name: eighth; }\n  .kr-loader .nine {\n    -webkit-animation-name: ninth; }\n  .kr-loader .ten {\n    -webkit-animation-name: tenth; }\n  @-webkit-keyframes first {\n  0% {\n    opacity: 0.2; }\n  10% {\n    opacity: 1; }\n  20% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes second {\n  0% {\n    opacity: 0; }\n  10% {\n    opacity: 0.2; }\n  20% {\n    opacity: 1; }\n  30% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes third {\n  0% {\n    opacity: 0; }\n  20% {\n    opacity: 0.2; }\n  30% {\n    opacity: 1; }\n  40% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes fourth {\n  0% {\n    opacity: 0; }\n  30% {\n    opacity: 0.2; }\n  40% {\n    opacity: 1; }\n  50% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes fifth {\n  0% {\n    opacity: 0; }\n  40% {\n    opacity: 0.2; }\n  50% {\n    opacity: 1; }\n  60% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes sixth {\n  0% {\n    opacity: 0; }\n  50% {\n    opacity: 0.2; }\n  60% {\n    opacity: 1; }\n  70% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes seventh {\n  0% {\n    opacity: 0; }\n  60% {\n    opacity: 0.2; }\n  70% {\n    opacity: 1; }\n  80% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes eighth {\n  0% {\n    opacity: 0; }\n  70% {\n    opacity: 0.2; }\n  80% {\n    opacity: 1; }\n  90% {\n    opacity: 0.2; }\n  100% {\n    opacity: 0; } }\n  @-webkit-keyframes ninth {\n  0% {\n    opacity: 0; }\n  80% {\n    opacity: 0.2; }\n  90% {\n    opacity: 1; }\n  100% {\n    opacity: 0.2; } }\n  @-webkit-keyframes tenth {\n  0% {\n    opacity: 0; }\n  90% {\n    opacity: 0.2; }\n  100% {\n    opacity: 1; } }\n"},HF1G:function(e,t){e.exports='<div bsModal #dataSourceModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" [config]="{backdrop: \'static\',  keyboard: false}">\n  <div class="modal-dialog modal-sm">\n    <div class="modal-content">\n      <div class="modal-header">\n        <label>Data Source Settings</label>\n        <button type="button" class="close pull-right" aria-label="Close" (click)="dataSourceModal.hide()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <form id="dataSourceForm" #filterForm="ngForm">\n          <div *ngIf="filter.channel" class="row">\n            <div class="col-sm-5 text-align-right">\n            <label>Team</label><br/>\n            </div>\n            <div class="col-sm-7">\n            <select [(ngModel)]="filter.channel" name="channel" (change)="channelSelected()" class="input-medium">\n              <option *ngFor="let channel of filter.channels" [value]="channel" [selected]="channel == filter.channel">{{channel}}</option>\n            </select>\n          </div>\n          </div>\n          <div *ngIf="filter.namespace" class="row">\n            <div class="col-sm-5 text-align-right">\n            <label>Data Source</label><br/>\n            </div>\n            <div class="col-sm-7">\n            <select [(ngModel)]="filter.namespace" name="namespace">\n              <option *ngFor="let namespace of filter.namespaces" [value]="namespace" [selected]="namespace == filter.namespace">{{namespace}}</option>\n            </select>\n          </div>\n          </div>\n          <div class="text-align-center add-top-margin">\n            <input type="checkbox" id="persistSettingsCheckbox" [(ngModel)]="persistSettings" name="persistSettings">\n            <label for="persistSettingsCheckbox">Persist settings after page reload</label>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-primary btn-sm" (click)="updateFilter(filterForm)">Save</button>\n        <button type="button" class="btn btn-default btn-sm" (click)="dataSourceModal.hide()">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},HcJU:function(e,t){e.exports=""},KNcP:function(e,t){e.exports='<div id="books-wrapper" class="container-fluid">\n  <div class="row">\n      <div id="books-left" class="col-sm-2 col-md-3">\n          \x3c!--sidebar--\x3e\n         \n          <button *ngIf="user?.isReader()" class="btn btn-primary" (click)="searchModal.show()">Search</button>\n          <knightrider-loader #loadermodels></knightrider-loader>   \n          <div class="model-tree">\n              <tree-root (activate)="treeNodeSelected($event)"\n                  (toggleExpanded)="treeNodeExpanded($event)" [nodes]="modelTree" [options]="treeOptions">\n                  <ng-template #treeNodeTemplate let-node>\n                      <span [ngClass]="getNodeIconClass(node)"></span>\n                      <span>{{ node.data.name }}</span>\n                  </ng-template>\n              </tree-root>\n          </div>\n         \n          \n          \n          \n          \n      </div>\n      <div id="books-center" class="col-sm-6 col-md-5">\n         \n          \x3c!--model rule details--\x3e\n          <knightrider-loader #loadersavemodel></knightrider-loader>\n\n          <app-auto-topic-rule-detail  (onUndoRequested)="refreshCurrentModel($event)"\n              [modelRule]="selectedRule" [model]="selectedModel" [filter]="filterPreferences" [user]="user" [jobId]="jobId"></app-auto-topic-rule-detail>\n\n      </div>\n     \n  </div>\n</div>\n\n\n\n\n<filter-component #filterModal [filter]="filterPreferences" [hideFilter]="globalFilterState" [user]="user" (onFilterUpdated)="refreshTree()"></filter-component>\n<app-auto-topic-model-search-modal #searchModal></app-auto-topic-model-search-modal>\n'},KQYc:function(e,t){e.exports=""},KhvR:function(e,t){e.exports='<div class="col-md-4 col-md-offset-4">\n  <div class="row text-center">\n    <div class="col-md-12">\n      <button (click)="createUser()" class="btn btn-primary add-margins" type="button">Create User</button>\n    </div>\n  </div>\n\n<table align="center" >\n  <tr *ngFor="let user of userList">\n    <td>\n    {{ user.email }}\n    </td>\n    <td>\n      <button class="btn btn-primary btn-xs" (click)="editUser(user)">Edit</button>\n    </td>\n    <td>\n      <button class="btn btn-primary btn-xs" (click)="deleteUser(user)">Delete</button>\n    </td>\n  </tr>\n</table>\n\n</div>\n<app-user-modal #userModal [adminUser]="adminUser" (onComplete)="getUsers()"></app-user-modal>\n'},L6Yk:function(e,t){e.exports=".text-align-right {\n  text-align: right; }\n\n.text-align-center {\n  text-align: center; }\n\n.add-top-margin {\n  margin-top: 10px; }\n\nselect {\n  width: 100%;\n  overflow: hidden;\n  white-space: pre;\n  text-overflow: ellipsis; }\n"},OWZt:function(e,t){e.exports='<div class="panel panel-default">\n  <collapsible-well [visible]="visible" (onVisible)="toggleVisible($event)">\n      <div section-header>\n          <div class="panel-heading pointable clearfix">\n           {{this.constraint.name}}\n               \n            \x3c!-- <div class="btn-group" dropdown>\n                  <button (click)="$event.stopPropagation()" dropdownToggle type="button" class="btn btn-link btn-xs dropdown-toggle light-text">\n                      {{this.constraint.name}}\n                      <span [class.dropup]="visible"><span class="caret"></span></span>\n                  </button>\n                  <ul *dropdownMenu class="dropdown-menu" role="menu">\n                      <li role="menuitem">\n                          <button class="btn btn-link" (click)="constraintRenameModal.show()">Rename</button>\n                      </li>\n                      <li role="menuitem">\n                          <confirm-button text="Remove" buttonStyle="btn btn-link" confirmStyle="btn btn-link confirm-button-warning" (onConfirm)="removeTopic()"></confirm-button>\n                      </li>\n                  </ul>\n              </div> --\x3e\n\n              <span class="pull-right" (click)="headerControlsClicked()">\n                 <span tooltip="fullscreen" class="pointable glyphicon glyphicon-fullscreen" (click)="constraintModal.show()"></span>\n              </span>\n          </div>\n      </div>\n      <div class="panel-body" section-body>\n          <b>Include</b>\n          <codemirror (change)="setDirty()" #includesmall name="includes" [(ngModel)]="constraint.keywords" [config]="{mode:\'structured\', lineWrapping:true, dragDrop:false, readOnly:true}">\n          </codemirror>\n          <b>Exclude</b>\n          <codemirror (change)="setDirty()" #excludesmall name="excludes" [(ngModel)]="constraint.notWords" [config]="{mode:\'structured\', lineWrapping:true, dragDrop:false, readOnly:true}">\n          </codemirror>\n          \n      </div>\n  </collapsible-well>\n</div>\n\n\n\n<div bsModal #constraintModal="bs-modal" class="modal fade constraint-modal" tabindex="-1" role="dialog" aria-hidden="true" (onShown)="refreshCodeMirror()" (onHide)="hide(constraintNameForm)">\n  <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n          <div class="modal-header">\n              <span class="pull-left">\n                  <form #constraintNameForm="ngForm" id="constraintNameModalForm" class="clearfix" >\n                      <div class="form-group" [class.has-error]="constraintNameForm.controls.constraintName?.invalid">\n                          <input class="form-control" #textbox type="text" [(ngModel)]="constraint.name" required placeholder="Topic Name" name="constraintName" maxlength="{{maxConstraintLength}}" pattern="[a-zA-Z0-9-_ ]*"/>\n                      </div>  \n                  </form> \n              </span>\n              <button type="button" class="close pull-right" (click)="constraintModal.hide()" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n      </button>\n          </div>\n          <div class="modal-body">\n              <div class="modal-half-height">\n                  <b>Include</b>\n                  <codemirror #includelarge name="includes" [(ngModel)]="constraint.keywords" [config]="{mode:\'structured\', lineWrapping:true, dragDrop:false, readOnly:true}">\n                  </codemirror>\n              </div>\n              <div class="modal-half-height">\n                  <b>Exclude</b>\n                  <codemirror #excludelarge name="excludes" [(ngModel)]="constraint.notWords" [config]="{mode:\'structured\', lineWrapping:true, dragDrop:false, readOnly:true}">\n                  </codemirror>\n              </div>\n              \n          </div>\n      </div>\n  </div>\n</div>\n'},"RUz+":function(e,t){e.exports='<div class="container-fluid">\n    <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-primary">\n        \n        <a class="navbar-brand" href="#">\n           \n            <img class="logo logo-light" alt="logo" src="../../assets/logo-light.png" height="25px" />\n\n\n        </a>\n\n\n        <div class="collapse navbar-collapse">\n\n            <div class="navbar-header navbar-right">\n                <ul class="nav navbar-nav">\n                    <li>\n                        <p class="navbar-text">{{getChannelNamespaceText()}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{user?.getRoleText()}}</p>\n                    </li>\n                    <li>\n                        <p class="navbar-text">Welcome {{user?.email}}</p>\n                    </li>\n                    <div class="btn-group navbar-nav" dropdown>\n                        <button id="navbarMenuButton" type="button" dropdownToggle class="btn btn-sm btn-default dropdown-toggle dropdown-toggle-split">\n                            <span class="glyphicon glyphicon-menu-hamburger"></span>\n                            <span class="sr-only">Split button!</span>\n                        </button>\n                        <ul *dropdownMenu class="dropdown-menu" role="menu">\n                            <li  role="menuItem"><button class="btn btn-link" (click)="redirectToTreeView()">Topic Tree View</button></li>\n                            <li *ngIf="user?.isAdmin()" role="menuItem"><button class="btn btn-link" (click)="redirectToUserManagement()">User Management</button></li>\n                            <li *ngIf="serverConfig.useAuth && user" role="menuitem"><button class="btn btn-link" (click)="logout()">Logout</button></li>\n                        </ul>\n                    </div>\n\n\n                </ul>\n            </div>\n        </div>\n       \n    </nav>\n</div>'},S1Wk:function(e,t){e.exports=""},S6ra:function(e,t){e.exports="#books-wrapper {\n  position: relative; }\n  #books-wrapper .model-tree {\n    margin-top: -20px;\n    height: calc(100vh - 115px); }\n  @media (min-width: 768px) {\n  #books-left {\n    height: calc(100vh - 115px); }\n  #books-center {\n    overflow: auto;\n    height: calc(100vh - 115px); }\n  #books-right {\n    overflow: auto;\n    height: calc(100vh - 115px); } }\n"},SnkB:function(e,t){e.exports='<form id="settingsForm" (ngSubmit)="submitSettings()"  class="">\n  <div class="row">\n    <div class="col-md-3 col-md-offset-1">\n      <h4><label>Filter Settings</label></h4>\n\n        <div class="form-group">\n            <label>Channel</label><br/>\n            <select [(ngModel)]="filter.channel" name="channel">\n                <option *ngFor="let channel of channels | mapToIterable" [value]="channel.key" [selected]="channel.key == filter.channel">{{channel.val}}</option>\n            </select>\n        </div>\n        <div class="form-group">\n            <label>Namespace</label><br/>\n            <select [(ngModel)]="filter.namespace" name="namespace">\n                <option *ngFor="let namespace of namespaces | mapToIterable" [value]="namespace.key" [selected]="namespace.key == filter.namespace">{{namespace.val}}</option>\n            </select>                \n        </div>\n        <button class="btn btn-default" modal-trigger="" [routerLink]="[\'\']">\n          Submit\n        </button>\n    </div>\n  </div>\n</form>\n'},SruU:function(e,t){e.exports=""},TWZi:function(e,t){e.exports='<div *ngIf="modelRule">\n\n\n  <div class="page-header clearfix">\n      <span>{{modelRule?.name}}</span>\n      \x3c!--<div class="pull-right">\n\n            <div class="btn-group" dropdown>\n              <button [disabled]="isModelPreviewDisabled()" [ngClass]="{disabled:isModelPreviewDisabled()}" class="btn btn-primary btn-sm"\n                  (click)="previewModel(false)">Preview</button>\n              <button [disabled]="isModelPreviewDisabled()" type="button" dropdownToggle class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split">\n              <span class="caret"></span>\n              <span class="sr-only">Split button!</span>\n          </button>\n        \n              <ul *dropdownMenu class="dropdown-menu" role="menu">\n                  <li role="menuitem"><button class="btn btn-link" (click)="previewModel(true)">Preview and export</button></li>\n              </ul>\n          </div>\n\n          <button class="btn btn-default btn-sm" (click)="filterModal.show()">Filter</button>\n\n          <div class="btn-group" dropdown placement="bottom left">\n              <button [disabled]="isNewTopicDisabled()" [ngClass]="{disabled:isNewTopicDisabled()}" class="btn btn-default btn-sm" (click)="newTopic()">New Topic</button>\n              <button type="button" dropdownToggle class="btn btn-sm btn-default dropdown-toggle dropdown-toggle-split">\n              <span class="caret"></span>\n              <span class="sr-only">Split button!</span>\n          </button>\n              <ul *dropdownMenu class="dropdown-menu" role="menu">\n                  <li role="menuitem">\n                      <confirm-button *ngIf="user?.isWriter()" text="Save" buttonStyle="btn btn-link" confirmStyle="btn btn-link confirm-button-warning" (onConfirm)="saveModel()"></confirm-button>\n                  </li>\n                 \n                  <li role="menuitem">\n                      <confirm-button text="Reset" buttonStyle="btn btn-link" confirmStyle="btn btn-link confirm-button-warning" (onConfirm)="undoRequested()"></confirm-button>\n                  </li>\n              </ul>\n          </div>\n\n      </div> --\x3e\n  </div>\n\n  <div class="app-auto-topic-rule-constraint-thumbnail-wrapper" *ngFor="let constraint of modelRule.constraints">\n      <app-auto-topic-rule-constraint-thumbnail [visible]="constraint===modelRule.constraints[0]"  #constraintthumbmail [constraint]="constraint" [constraintNames]="getConstraintNames()"  (onRemoveConstraint)="removeConstraint($event)"></app-auto-topic-rule-constraint-thumbnail>\n  </div>\n</div>\n\n<div *ngIf="!modelRule">\n  <div *ngIf="!model && user.isReader()" class="bs-callout bs-callout-default">\n      <h4>Select a rule definition from the left</h4>\n  </div>\n  <div *ngIf="!user.isReader() && user.role.channel == \'\' && user.role.namespace == \'\'" class="bs-callout bs-callout-default">\n      <h4>You have not been assigned a valid ROLE, please contact your administrator.</h4>\n  </div>\n  <div *ngIf="!user.isReader() && user.role.channel != \'\' && user.role.namespace != \'\'" class="bs-callout bs-callout-default">\n      <h4>You have not been assigned the minimum READER ROLE <br/>for channel \'<b>{{user.role.channel}}</b>\' and namespace: \'<b>{{user.role.namespace}}</b>\'<br/><br/>Please<span *ngIf="user.roles.length > 1"> select a different Channel/Namespace from the Global Filter, or</span> contact your administrator for assistance.</h4>\n  </div>\n</div>\n\n<filter-component #filterModal [filter]="filter" [user]="user" [hideFilter]="hideFilter"></filter-component>'},TqyR:function(e,t){e.exports='<button (click)="clicked()" class="{{currentStyle}}">{{currentText}}</button>'},Vdwv:function(e,t){e.exports='<div bsModal #filterModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" [config]="{backdrop: \'static\',  keyboard: false}">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <label>Filter Settings</label>\n                <button type="button" class="close pull-right" aria-label="Close" (click)="filterModal.hide()">\n                <span aria-hidden="true">&times;</span>\n              </button>\n            </div>\n            <div class="modal-body">\n                <form id="filterForm" #filterForm="ngForm">\n                    <div *ngIf="hideFilter && !hideFilter.location" class="form-group">\n                        <label>Location</label><br/>\n                        <select [(ngModel)]="filter.metadata.contactAddressState" name="contactAddressState">\n                            <option *ngFor="let state of filter.states | mapToIterable" [value]="state.key" [selected]="state.key == filter.metadata.contactAddressState">{{state.val}}</option>\n                        </select>\n                    </div>\n                    <div *ngIf="hideFilter && !hideFilter.presetDateRanges" class="form-group">\n                        <label>Preset Date Range</label><br/>\n                        <select (change)="filter.setDateRange($event.target.value)" name="presetDateRange">\n                            <option *ngFor="let dateRange of filter.presetDateRanges | mapToIterable" [value]="dateRange.key" [selected]="dateRange.key == filter.selectedDateRange">{{dateRange.val}}</option>\n                        </select>\n                    </div>\n                    <div *ngIf="hideFilter && !hideFilter.startDt" class="form-group">\n                        <label>Start Date</label><br/>\n                        <material-datepicker [disabled]="filter.selectedDateRange>0" [(date)]="filter.startDt"></material-datepicker>\n                    </div>\n                    <div *ngIf="hideFilter && !hideFilter.endDt" class="form-group">\n                        <label>End Date</label><br/>\n                        <material-datepicker [disabled]="filter.selectedDateRange>0" [(date)]="filter.endDt"></material-datepicker>\n                    </div>\n                  <div class="form-group">\n                    <input type="checkbox" id="persistSettingsCheckbox" [(ngModel)]="persistSettings" name="persistSettings">\n                    <label for="persistSettingsCheckbox">Persist settings after page reload</label>\n                  </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary btn-sm" (click)="updateFilter(filterForm)">Save</button>\n                <button type="button" class="btn btn-default btn-sm" (click)="filterModal.hide()">Cancel</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},Vvj7:function(e,t){e.exports='<div class="container">\n  <div class="row text-center">\n    <div class="col">Contact Us Component</div>\n  </div>\n</div>'},Xfg1:function(e,t){e.exports=""},Y2vK:function(e,t){e.exports="<div>\n  <div [hidden]=\"isHidden\" class=\"kr-loader center-block\">\n    <div class='one'></div>\n    <div class='two'></div>\n    <div class='three'></div>\n    <div class='four'></div>\n    <div class='five'></div>\n    <div class='six'></div>\n    <div class='seven'></div>\n    <div class='eight'></div>\n    <div class='nine'></div>\n    <div class='ten'></div>\n  </div>\n</div>"},eK69:function(e,t){e.exports="body {\n  background: url('texture-noise.c175ab89a70c7e7cd326.png');\n  overflow: hidden;\n  margin: 0;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", Helvetica; }\n\n#chart, #header, #footer {\n  position: absolute;\n  top: 0; }\n\n#header, #footer {\n  z-index: 1;\n  display: block;\n  font-size: 36px;\n  font-weight: 300;\n  text-shadow: 0 1px 0 #fff; }\n\n#header.inverted, #footer.inverted {\n  color: #fff;\n  text-shadow: 0 1px 4px #000; }\n\n#header {\n  top: 80px;\n  left: 140px;\n  width: 1000px; }\n\n#footer {\n  top: 680px;\n  right: 140px;\n  text-align: right; }\n\nrect {\n  fill: none;\n  pointer-events: all; }\n\npre {\n  font-size: 18px; }\n\nline {\n  stroke: #000;\n  stroke-width: 1.5px; }\n\n.string, .regexp {\n  color: #f39; }\n\n.keyword {\n  color: #00c; }\n\n.comment {\n  color: #777;\n  font-style: oblique; }\n\n.number {\n  color: #369; }\n\n.class, .special {\n  color: #1181B8; }\n\na:link, a:visited {\n  color: #000;\n  text-decoration: none; }\n\na:hover {\n  color: #666; }\n\n.hint {\n  position: absolute;\n  right: 0;\n  width: 1280px;\n  font-size: 12px;\n  color: #999; }\n\n.node circle {\n  cursor: pointer;\n  fill: #fff;\n  stroke: steelblue;\n  stroke-width: 1.5px; }\n\n.node text {\n  font-size: 11px; }\n\npath.link {\n  fill: none;\n  stroke: #ccc;\n  stroke-width: 1.5px; }\n"},f6ft:function(e,t){e.exports='<footer class="container-fluid text-center">\n    <br/>\n    <div class="col h6 text-white bg-primary">LEXCORE version {{lexwebVersion}}  \ufffd 2018 SKELLAM AI</div>    \n</footer>\n\n\x3c!--<footer class="container-fluid text-center">\n  \n  \n  <div class="col h6 text-white bg-primary">Lexweb version {{lexwebVersion}}  \xa9 2018 SKELLAM AI</div>\n</footer>--\x3e'},g567:function(e,t){e.exports='<div bsModal #searchModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" [config]="{backdrop: \'static\',  keyboard: false}" >\n  <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n          <div class="modal-header">\n              <label>Model Search</label>\n              <button type="button" class="close pull-right" aria-label="Close" (click)="searchModal.hide()">\n                  <span aria-hidden="true">&times;</span>\n              </button>\n          </div>\n          <div class="modal-body">\n              <div id="search-wrapper" class="container-fluid">\n                  <div class="row">\n                      <input [(ngModel)]="searchText" name="searchText" (keyup.enter)="search()" />\n                      <button type="button" class="btn btn-primary btn-sm" (click)="search();">Search</button>\n                      <div *ngIf="noResults">\n                              No results were found.\n                      </div>\n                  </div>\n                  <div class="row">\n                      <knightrider-loader #loaderSearch></knightrider-loader>\n                      <div id="search-left" class="col-sm-4 search-model-tree">\n                          <tree-root (activate)="treeNodeSelected($event)" [nodes]="searchModelTree" [options]="searchTreeOptions"></tree-root>\n                         \n                      </div>\n                      <div id="search-right" class="col-sm-8">\n                              <div *ngIf="visitedNodes" class="pager center-block">\n                                  <button *ngIf="visitedNodes && visitedNodes.length > 0" class="btn btn-link btn-xs" (click)="previousNode()">Previous</button>\n                                  <button *ngIf="hasUnvisitedNodes" class="btn btn-link btn-xs" (click)="nextNode()">Next</button>\n                              </div>\n                          <div class="auto-topic-model-search-constraint" *ngFor="let constraint of modelRule?.constraints; let i=index">\n                              <div class="panel panel-default">\n                                  <collapsible-well [visible]="constraint===modelRule.constraints[0]">\n                                      <div section-header>\n                                          <div class="panel-heading pointable clearfix">\n                                              <div class="btn-group" dropdown>\n                                                  <button (click)="$event.stopPropagation()" dropdownToggle type="button" class="btn btn-link btn-xs dropdown-toggle light-text">\n                                                      {{getName(constraint, i)}}\n                                                      <span [class.dropup]="visible">\n                                                          <span class="caret"></span>\n                                                      </span>\n                                                  </button>\n                                              </div>\n                                          </div>\n                                      </div>\n                                      <div class="panel-body" section-body>\n                                          <div class="row-fluid">\n                                              <label for="keyword_constraint{{$index}}">Include</label>\n                                          </div>\n                                          <div class="row-fluid">\n                                              <div id="keyword_constraint{{$index}}" innerHTML="{{ constraint.keywords }}" class="search-constraint-div"></div>\n                                          </div>\n                                          <div class="row-fluid">\n                                              <label for="notword_constraint{{$index}}">Exclude</label>\n                                          </div>\n                                          <div class="row-fluid">\n                                              <div id="notword_constraint{{$index}}" innerHTML="{{ constraint.notWords }}" class="search-constraint-div"></div>\n                                          </div>\n                                      </div>\n                                  </collapsible-well>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n</div>\n'},kElZ:function(e,t){e.exports='<div bsModal #userModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"\n     [config]="{backdrop: \'static\',  keyboard: false}">\n  <div class="modal-dialog modal-sm">\n    <div class="modal-content">\n      <div class="modal-header">\n        <label>{{ isEdit ? \'Edit\' : \'Create\' }} User</label>\n        <button type="button" class="close pull-right" aria-label="Close" (click)="cancelUpdate()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <div class="row">\n          <div class="col-md-7">\n            <input type="text" class="form-control" id="username2" [(ngModel)]="username" placeholder="Enter username"\n                   [disabled]="isEdit">\n          </div>\n          <div class="col-md-4 pull-left decrease-margin">\n            <label class="email-label">@starbucks.com</label>\n          </div>\n          <div *ngIf="usernameError()" class="alert alert-danger">\n            <div>\n              Username cannot contain @\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <label>Default</label>\n          <div>\n            <label class="col-md-6">Team</label>\n            <label class="col-md-6">Datasource</label>\n          </div>\n          <div>\n            <select class="btn btn-select col-md-6" ng-model="defaultChannel.channel"\n                    (change)="populateNamespaceDropdown($event)">\n              <option *ngFor="let datasource of defaultAndAdminDataSources" [value]="datasource.channel"\n                      [selected]="datasource.channel == defaultChannel.channel">{{datasource.channel}}\n              </option>\n            </select>\n            <select class="btn btn-select col-md-6" ng-model="defaultChannel.namespace"\n                    (change)="updateDefaultDatasource(user, $event)">\n              <option *ngFor="let namespace of selectedChannel.namespaces" [value]="namespace.name"\n                      [selected]="namespace.name == defaultChannel.namespace">{{ namespace.name }}\n              </option>\n            </select>\n          </div>\n        </div>\n\n        <div>\n          <label>Datasource Permissions</label>\n          <div *ngFor="let dataSource of adminDataSources">\n            <div class="panel panel-default">\n              <collapsible-well [visible]="dataSource.visible" (onVisible)="dataSource.visible = $event;">\n                <div section-header>\n                  <div class="panel-heading pointable clearfix">\n                    <div class="btn-group" dropdown>\n                      <button type="button" class="btn btn-link btn-xs">\n                        {{dataSource.channel}}\n                        <span [class.dropup]="dataSource.visible"><span class="caret"></span></span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div class="panel-body" section-body>\n                  <div class="row" *ngFor="let namespace of dataSource.namespaces">\n                    <label class="col-md-6">{{ namespace.name }}</label>\n                    <select class="btn btn-select col-md-6"\n                            (change)="updateRole($event, user, dataSource.channel, namespace.name)">\n                      <option *ngFor="let role of roles" [value]="role.name" [selected]="role.name == namespace.role">\n                        {{role.name}}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n              </collapsible-well>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-primary btn-sm" (click)="saveUser(user);" [disabled]="!username || usernameError()">Save</button>\n        <button type="button" class="btn btn-default btn-sm" (click)="cancelUpdate();">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},ljLh:function(e,t){e.exports='<div class="container">\n    <div class="row text-center">\n        <div class="col">Home Component</div>\n    </div>\n</div>'},lpFi:function(e,t){e.exports=".navbar .navbar-small {\n  font-size: x-small; }\n\n.navbar .navbar-nav #navbarMenuButton {\n  margin: 10px 0; }\n\n.navbar-thumbnail {\n  height: 27px;\n  margin: -5px -4px -4px 4px; }\n"},mnsA:function(e,t){e.exports='    <div (click)="toggleContent()">\n        <ng-content select="[section-header]"></ng-content>\n    </div>\n    <div *ngIf="visible">\n        <ng-content select="[section-body]"></ng-content>\n    </div>'},nwnM:function(e,t){e.exports='<div bsModal #searchModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" [config]="{backdrop: \'static\',  keyboard: false}" >\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <label>Model Search</label>\n                <button type="button" class="close pull-right" aria-label="Close" (click)="searchModal.hide()">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <div id="search-wrapper" class="container-fluid">\n                    <div class="row">\n                        <input [(ngModel)]="searchText" name="searchText" (keyup.enter)="search()" />\n                        <button type="button" class="btn btn-primary btn-sm" (click)="search();">Search</button>\n                        <div *ngIf="noResults">\n                                No results were found.\n                        </div>\n                    </div>\n                    <div class="row">\n                        <knightrider-loader #loaderSearch></knightrider-loader>\n                        <div id="search-left" class="col-sm-4 search-model-tree">\n                            <tree-root (activate)="treeNodeSelected($event)" [nodes]="searchModelTree" [options]="searchTreeOptions"></tree-root>\n                            <context-menu #searchTreeMenu>\n                                <ng-template contextMenuItem (execute)="copy($event)">\n                                    Copy\n                                </ng-template>\n                                <ng-template contextMenuItem [visible]="isReferenceAllowed" (execute)="copyByReference($event)">\n                                    Copy Reference\n                                </ng-template>\n                            </context-menu>\n                        </div>\n                        <div id="search-right" class="col-sm-8">\n                                <div *ngIf="visitedNodes" class="pager center-block">\n                                    <div class="col-sm-6">\n                                        <button *ngIf="visitedNodes && visitedNodes.length > 0" class="btn btn-link btn-xs" (click)="previousNode()">Previous</button>\n                                    </div>\n                                    <div class="col-sm-6">\n                                        <button *ngIf="hasUnvisitedNodes" class="btn btn-link btn-xs" (click)="nextNode()">Next</button>\n                                    </div>\n                                </div>\n                            <div class="model-search-constraint" *ngFor="let constraint of modelRule?.constraints; let i=index">\n                                <div class="panel panel-default">\n                                    <collapsible-well [visible]="constraint===modelRule.constraints[0]">\n                                        <div section-header>\n                                            <div class="panel-heading pointable clearfix">\n                                                <div class="btn-group" dropdown>\n                                                    <button (click)="$event.stopPropagation()" dropdownToggle type="button" class="btn btn-link btn-xs dropdown-toggle light-text">\n                                                        {{getName(constraint, i)}}\n                                                        <span [class.dropup]="visible">\n                                                            <span class="caret"></span>\n                                                        </span>\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="panel-body" section-body>\n                                            <div class="row-fluid">\n                                                <label for="keyword_constraint{{$index}}">Include</label>\n                                            </div>\n                                            <div class="row-fluid">\n                                                <div id="keyword_constraint{{$index}}" innerHTML="{{ constraint.keywords }}" class="search-constraint-div"></div>\n                                            </div>\n                                            <div class="row-fluid">\n                                                <label for="notword_constraint{{$index}}">Exclude</label>\n                                            </div>\n                                            <div class="row-fluid">\n                                                <div id="notword_constraint{{$index}}" innerHTML="{{ constraint.notWords }}" class="search-constraint-div"></div>\n                                            </div>\n                                        </div>\n                                    </collapsible-well>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},okgc:function(e,t){e.exports=""},ozuw:function(e,t){e.exports="th {\n  text-align: left; }\n\nth, td {\n  padding: 5px; }\n\ntbody tr:nth-child(odd) {\n  background-color: #f2f2f2; }\n\n.add-margins {\n  margin-bottom: 20px !important; }\n"},soBZ:function(e,t){e.exports=""},tBAH:function(e,t){e.exports='<div class="container">\n  <div class="row">\n    <div class="col h1 text-center bg-danger">Page Not Found</div>\n  </div>\n</div>\n\n\n'},tR4B:function(e,t){e.exports='<h1 class="errorMessage">404\'d</h1>'},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("O61y"),o=n("3j3K"),r=n("Qbdm"),a=n("Exih"),s=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();l=s([Object(o.o)({selector:"app-page-not-found",template:n("tBAH"),styles:[n("SruU")]}),c("design:paramtypes",[])],l);var d=n("5+/9"),u=n("5oXY"),p=function(){function e(e,t,n,i){var o=this;this.setDateRange(n,e,t),this.metadata={contactAddressState:""},this.channel=i.role?i.role.channel:"",this.namespace=i.role?i.role.namespace:"",this.channels=[],i.roles.forEach(function(e){o.channels.find(function(t){return t==e.channel})||o.channels.push(e.channel)}),this.channels.sort(),this.setNamespaces(i.roles)}return e.prototype.setDateRange=function(e,t,n){this.selectedDateRange=e,this.startDt=t||new Date((new Date).setDate((new Date).getDate()-e)),this.endDt=n||new Date},e.prototype.setNamespaces=function(e){var t=this;this.namespaces=[],e.forEach(function(e){e.channel==t.channel&&t.namespaces.push(e.namespace)}),this.namespaces.sort()},e}(),f=function(){function e(e){this.email=e.email,this.role=e.roles.find(function(e){return 1==e.default})||{channel:"",namespace:"",reader:!1,writer:!1,admin:!1},this.roles=e.roles}return e.prototype.isReader=function(){return this.role.reader||this.role.writer||this.role.admin},e.prototype.isWriter=function(){return this.role.writer||this.role.admin},e.prototype.isAdmin=function(){return this.role.admin},e.prototype.getRoleText=function(){return this.isAdmin()?"ADMIN ROLE":this.isWriter()?"WRITER ROLE":this.isReader()?"READER ROLE":"NO AVAILABLE ROLES"},e}(),h=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(){function e(){}return e.prototype.transform=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({key:n,val:e[n]});return t},e}();b=h([Object(o.Y)({name:"mapToIterable"})],b);var m=n("g5jc"),g=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(){this.subject=new m.b}return e.prototype.setFilter=function(e){this.filter=e,this.subject.next(e)},e.prototype.getFilter=function(){return this.subject.asObservable()},e.prototype.setChannel=function(e){this.filter.channel=e},e.prototype.setNamespace=function(e){this.filter.namespace=e},e.prototype.refreshAll=function(){this.subject.next(this.filter)},e}();y=g([Object(o.C)(),v("design:paramtypes",[])],y);var x=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},w=function(){function e(){this.subject=new m.b,this.state={isDirty:!1}}return e.prototype.setDirty=function(e){this.state.isDirty=e,this.subject.next(this.state)},e.prototype.getState=function(){return this.subject.asObservable()},e.prototype.refreshAll=function(){this.subject.next(this.state)},e}();w=x([Object(o.C)()],w);var O=n("+u4y"),R=n("XZJt"),j=n("Fzro"),S={withCredentials:!0,production:!0,envName:"prod",defaultDateRange:120,enableProdMode:!0,previewResultsPageSize:20,maxTopicLength:30,maxConstraints:4,startDateKey:"lexweb_filter_start_date",endDateKey:"lexweb_filter_end_date",dateRangeKey:"lexweb_filter_date_range",channelKey:"lexweb_filter_channel",namespaceKey:"lexweb_talk_filter_namespace"},k=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},N=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},M=function(){function e(){this.subject=new m.b}return e.prototype.setUser=function(e){this.user=e,this.subject.next(e)},e.prototype.getUser=function(){return this.subject.asObservable()},e.prototype.refreshAll=function(){this.subject.next(this.user)},e.prototype.resetUser=function(){this.subject=null,this.user=null},e}();M=k([Object(o.C)(),N("design:paramtypes",[])],M);var D=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(){this.subject=new m.b}return e.prototype.setConfig=function(e){this.serverConfig=e,this.subject.next(e)},e.prototype.getConfig=function(){return this.subject.asObservable()},e.prototype.refreshAll=function(){this.subject.next(this.serverConfig)},e}();C=D([Object(o.C)(),_("design:paramtypes",[])],C);var T=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},I=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},F=function(){function e(e,t,n,i,o,r){var a=this;this.router=e,this.http=t,this.notificationService=n,this.userService=i,this.serverConfigService=o,this.filterService=r,this.userService.getUser().subscribe(function(e){return a.user=e},function(e){return a.handleError(e)},function(){}),this.serverConfigService.getConfig().subscribe(function(e){return a.serverConfig=e},function(e){return a.handleError(e)},function(){}),this.filterService.getFilter().subscribe(function(e){return a.filter=e},function(e){return a.handleError(e)},function(){})}return e.prototype.getModels=function(e,t){var n=this;return this.http.get(this.serverConfig.apiUrl+"/topicDetection/models/"+e+"/"+t,this.getRequestOptions()).map(function(e){return e.json()}).catch(function(e){return n.handleError(e)})},e.prototype.getTree=function(e,t){var n=this;return this.http.get(this.serverConfig.apiUrl+"/topicDetection/tree/"+e+"/"+t,this.getRequestOptions()).map(function(e){return e.json()}).catch(function(e){return n.handleError(e)})},e.prototype.getModel=function(e,t){var n=this;return void 0===t&&(t=!1),this.http.get(this.serverConfig.apiUrl+"/topicDetection/"+e+"?getRules="+t,this.getRequestOptions()).map(function(e){var n;return t?(n=e.json(),Object.keys(n).forEach(function(e){n[e].constraints.forEach(function(e){void 0!==e.andWords1&&null!=e.andWords1&&e.andWords1.length>0&&(e.keywords+=" AND ("+e.andWords1+")",e.andWords1=null),void 0!==e.andWords2&&null!=e.andWords2&&e.andWords2.length>0&&(e.keywords+=" AND ("+e.andWords2+")",e.andWords2=null)})})):n=e.json(),n.etag=e.headers.get("etag"),n}).catch(function(e){return n.handleError(e)})},e.prototype.getModelRules=function(e,t){var n=this;return this.http.get(this.serverConfig.apiUrl+"/topicDetection/"+e+"/node?path="+encodeURIComponent(t),this.getRequestOptions()).map(function(e){var t=e.json(),n=0;return t.constraints.forEach(function(e){n++,void 0!=e.name&&null!=e.name||(e.name="Topic"+n),e.name=e.name.replace(/ /g,"-").replace(/_/g,"-"),e.name.length>30&&(e.name=e.name.substr(0,30)),(e.andWords1||e.andWords2)&&(e.keywords="("+e.keywords+")"),void 0!==e.andWords1&&null!=e.andWords1&&e.andWords1.length>0&&(e.keywords&&e.keywords.length>0?e.keywords+=" AND ("+e.andWords1+")":e.keywords=e.andWords1,e.andWords1=null),void 0!==e.andWords2&&null!=e.andWords2&&e.andWords2.length>0&&(e.keywords&&e.keywords.length>0?e.keywords+=" AND ("+e.andWords2+")":e.keywords=e.andWords2,e.andWords2=null)}),t}).catch(function(e){return n.handleError(e)})},e.prototype.getStates=function(){var e=new R.b;return setTimeout(function(){e.next(Y),e.complete()},10),e.asObservable()},e.prototype.getPresetDateRanges=function(){var e=new R.b;return setTimeout(function(){e.next(B),e.complete()},10),e.asObservable()},e.prototype.getStructuredDataTaxonomy=function(e,t){var n=this;return this.http.get(this.serverConfig.apiUrl+"/service/config/metadata/"+e.channel+"/"+e.namespace+"?getValues="+t,this.getRequestOptions()).map(function(e){return e.json()}).catch(function(e){return n.handleError(e)})},e.prototype.searchModels=function(e,t,n){var i=this;return this.http.get(this.serverConfig.apiUrl+"/topicDetection/matchingConstraints/"+encodeURIComponent(e)+"?channel="+t+"&namespace="+n,this.getRequestOptions()).map(function(e){return e.text().length>0?e.json():[]}).catch(function(e){return i.handleError(e)})},e.prototype.getNodeUser=function(e){var t=this,n=e?window.location.origin+"/api/user?setRole="+e:window.location.origin+"/api/user";return this.http.get(n).map(function(e){return e.json()}).catch(function(e){return t.handleError(e)})},e.prototype.getNodeServerConfig=function(){var e=this;return this.http.get(window.location.origin+"/api/config").map(function(e){return e.json()}).catch(function(t){return e.handleError(t)})},e.prototype.postNodeError=function(e){var t=this;return this.http.post(window.location.origin+"/s/logError",e).map(function(e){return e.json()}).catch(function(e){return t.handleError(e)})},e.prototype.handleError=function(e){return e._body&&"[object ProgressEvent]"==e._body.toString()&&(e.ct_message={currentTarget:e._body.currentTarget},e.error=!0),"TypeError"==e.name&&(e.ct_message={name:e.name,message:e.message,stack:e.stack},e.error=!0),R.a.throw(e)},e.prototype.getRequestOptions=function(e){var t=new j.d;return t.withCredentials=S.withCredentials,t.headers=new j.a,t.headers.append("UserEmail",this.user.email),t.headers.append("channel",this.filter.channel),t.headers.append("namespace",this.filter.namespace),e&&t.headers.append("ETag",e),t},e.prototype.getChannels=function(){var e=this;return this.http.get(this.serverConfig.apiUrl+"/service/channels",this.getRequestOptions()).map(function(e){return e.json()}).catch(function(t){return e.handleError(t)})},e.prototype.getNamespaces=function(e){var t=this;return this.http.get(this.serverConfig.apiUrl+"/service/"+e+"/namespaces",this.getRequestOptions()).map(function(e){return e.json()}).catch(function(e){return t.handleError(e)})},e.prototype.getAllUsers=function(){var e=this,t=window.location.origin+"/s/users";return this.http.get(t).map(function(e){return e.json()}).catch(function(t){return e.handleError(t)})},e.prototype.saveUser=function(e){var t=this,n=window.location.origin+"/s/user/update",i=JSON.stringify(e);return this.http.put(n,{json:i}).map(function(e){return e.json()}).catch(function(e){return t.handleError(e)})},e.prototype.deleteUser=function(e){var t=this,n=window.location.origin+"/s/user/delete";return this.http.put(n,{username:e}).map(function(e){return e}).catch(function(e){return t.handleError(e)})},e}();F=T([Object(o.C)(),I("design:paramtypes",["function"==typeof(E="undefined"!=typeof u.b&&u.b)&&E||Object,"function"==typeof(A="undefined"!=typeof j.b&&j.b)&&A||Object,"function"==typeof(P="undefined"!=typeof O.b&&O.b)&&P||Object,"function"==typeof(U="undefined"!=typeof M&&M)&&U||Object,"function"==typeof(W="undefined"!=typeof C&&C)&&W||Object,"function"==typeof(V="undefined"!=typeof y&&y)&&V||Object])],F);var E,A,P,U,W,V,L,K,H,z,Y={"":"n/a",AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},B={0:"n/a",30:"Last 30 Days",60:"Last 60 Days",90:"Last 90 Days",120:"Last 120 Days"},$=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},q=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Z=function(){function e(e,t,n,i){var o=this;this.notify=e,this.autoTopicService=t,this.userService=n,this.filterService=i,this.userService.getUser().subscribe(function(e){return o.user=e},function(e){throw e},function(){}),this.filterService.getFilter().subscribe(function(e){return o.filter=e},function(e){throw e},function(){})}return e.prototype.initError=function(e){e.level=e.warn?"warn":e.info?"info":"error",e._body&&"[object ProgressEvent]"==e._body.toString()&&(e._body={currentTarget:e._body.currentTarget},e.ct_message="Lexweb API Service is currently unavailable, please try again later"),e.ct_message||(e.ct_message=e._body?e._body:e.toString()),e.user||(e.user=this.user.email),e.channel||(e.channel=this.filter.channel),e.namespace||(e.namespace=this.filter.namespace),e.startDt||(e.startDt=this.filter.startDt),e.endDt||(e.endDt=this.filter.endDt),e.contactAddressState||(e.contactAddressState=this.filter.metadata.contactAddressState),e.status&&401==e.status&&(e.ct_message="Your CoffeeTalk session has expired!",e.level="error")},e.prototype.logError=function(e){throw this.initError(e),this.notify.show(e.ct_message,{position:"top",sticky:!0,type:e.level}),e},e}();Z=$([Object(o.C)(),q("design:paramtypes",["function"==typeof(L="undefined"!=typeof O.b&&O.b)&&L||Object,"function"==typeof(K="undefined"!=typeof F&&F)&&K||Object,"function"==typeof(H="undefined"!=typeof M&&M)&&H||Object,"function"==typeof(z="undefined"!=typeof y&&y)&&z||Object])],Z);var G,Q,X=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},J=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ee=function(){function e(e,t){this.router=e,this.autoTopicService=t}return e.prototype.resolve=function(e){return this.autoTopicService.getNodeUser(e.queryParams.setRole)},e}();ee=X([Object(o.C)(),J("design:paramtypes",["function"==typeof(G="undefined"!=typeof u.b&&u.b)&&G||Object,"function"==typeof(Q="undefined"!=typeof F&&F)&&Q||Object])],ee);var te,ne=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},ie=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},oe=function(){function e(e){this.autoTopicService=e}return e.prototype.resolve=function(e){return this.autoTopicService.getNodeServerConfig()},e}();oe=ne([Object(o.C)(),ie("design:paramtypes",["function"==typeof(te="undefined"!=typeof F&&F)&&te||Object])],oe);var re=n("rdLu"),ae=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},se=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ce=function(){function e(){this.isHidden=!0}return e.prototype.ngOnInit=function(){},e.prototype.show=function(){this.isHidden=!1},e.prototype.hide=function(){this.isHidden=!0},e.prototype.toggleVisibility=function(){this.isHidden=!this.isHidden},e}();ce=ae([Object(o.o)({selector:"knightrider-loader",template:n("Y2vK"),styles:[n("DpnV")]}),se("design:paramtypes",[])],ce);var le,de,ue,pe,fe,he,be,me,ge=n("qEO0"),ve=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},ye=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xe=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},we=function(){function e(e,t,n,i,r){this.autoTopicService=e,this.filterService=t,this.lexwebNotificationService=n,this.userService=i,this.storage=r,this.onFilterUpdated=new o.x}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.filterService.getFilter().subscribe(function(t){return e.filter=t},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.show=function(){this.filterModal.show()},e.prototype.updateFilter=function(e){e.dirty&&(e.form.markAsPristine(),e.form.markAsUntouched(),e.form.updateValueAndValidity(),this.onFilterUpdated.emit()),this.persistSettings&&(this.storage.set(S.dateRangeKey,this.filter.selectedDateRange),this.storage.set(S.startDateKey,this.filter.startDt),this.storage.set(S.endDateKey,this.filter.endDt),this.persistSettings=!1),this.filterModal.hide()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e}();ve([Object(o.F)(),ye("design:type","function"==typeof(le="undefined"!=typeof p&&p)&&le||Object)],we.prototype,"filter",void 0),ve([Object(o.F)(),ye("design:type","function"==typeof(de="undefined"!=typeof f&&f)&&de||Object)],we.prototype,"user",void 0),ve([Object(o.F)(),ye("design:type",(!1,Object))],we.prototype,"hideFilter",void 0),ve([Object(o.U)(),ye("design:type","function"==typeof(ue="undefined"!=typeof o.x&&o.x)&&ue||Object)],we.prototype,"onFilterUpdated",void 0),ve([Object(o._17)("filterModal"),ye("design:type",Object)],we.prototype,"filterModal",void 0),we=ve([Object(o.o)({selector:"filter-component",template:n("Vdwv"),styles:[n("Xfg1")]}),xe(4,Object(o.B)(ge.a)),ye("design:paramtypes",["function"==typeof(pe="undefined"!=typeof F&&F)&&pe||Object,"function"==typeof(fe="undefined"!=typeof y&&y)&&fe||Object,"function"==typeof(he="undefined"!=typeof Z&&Z)&&he||Object,"function"==typeof(be="undefined"!=typeof M&&M)&&be||Object,"function"==typeof(me="undefined"!=typeof ge.StorageService&&ge.StorageService)&&me||Object])],we);var Oe,Re,je,Se,ke,Ne,Me,De,_e,Ce,Te,Ie=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Fe=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ee=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},Ae=function(){function e(e,t,n,i,o,r,a,s){this.AutoTopicService=e,this.route=t,this.userService=n,this.filterService=i,this.appStateServive=o,this.lexwebNotificationService=r,this.serverConfigService=a,this.storage=s,this.actionMapping={mouse:{click:this.treeNodeClickHandler.bind(this)}},this.treeOptions={actionMapping:this.actionMapping,allowDrop:!1,useVirtualScroll:!0,nodeHeight:22},this.globalFilterState={channels:!1,namespaces:!1,states:!0,presetDateRanges:!1,location:!0,startDt:!1,endDt:!1}}return e.prototype.ngOnInit=function(){var e=this;this.routeSubscription=this.route.data.subscribe(function(t){e.user=new f(t.user),e.userService.setUser(e.user),e.serverConfig=t.config,e.serverConfigService.setConfig(e.serverConfig)},function(t){return e.lexwebNotificationService.logError(t)},function(){}),this.appStateSubscription=this.appStateServive.getState().subscribe(function(t){return e.appState=t},function(t){return e.lexwebNotificationService.logError(t)},function(){}),this.filterPreferences=this.initializeFilterService(),this.appStateServive.refreshAll(),this.refreshTree()},e.prototype.initializeFilterService=function(){var e=this.storage.get(S.startDateKey)?new Date(this.storage.get(S.startDateKey)):null,t=this.storage.get(S.endDateKey)?new Date(this.storage.get(S.endDateKey)):null,n=this.storage.get(S.dateRangeKey)?parseInt(this.storage.get(S.dateRangeKey)):S.defaultDateRange,i=this.storage.get(S.channelKey),o=this.storage.get(S.namespaceKey);i&&o&&(this.user.role=this.user.roles.find(function(e){return e.channel==i&&e.namespace==o}));var r=new p(e,t,n,this.user);return this.getStates(r),this.getPresetDateRanges(r),this.filterService.setFilter(r),this.getTaxonomy(r),i&&(this.filterService.setChannel(i),o&&this.filterService.setNamespace(o)),r},e.prototype.getTaxonomy=function(e){var t=this;if(""!=e.channel&&""!=e.namespace&&this.user.isReader())var n=this.AutoTopicService.getStructuredDataTaxonomy(e,!0).finally(function(){return n.unsubscribe()}).subscribe(function(t){e.structuredDataTaxonomy=t},function(e){return t.lexwebNotificationService.logError(e)})},e.prototype.getStates=function(e){var t=this,n=this.AutoTopicService.getStates().finally(function(){return n.unsubscribe()}).subscribe(function(t){return e.states=t},function(e){return t.lexwebNotificationService.logError(e)})},e.prototype.getPresetDateRanges=function(e){var t=this,n=this.AutoTopicService.getPresetDateRanges().finally(function(){return n.unsubscribe()}).subscribe(function(t){return e.presetDateRanges=t},function(e){return t.lexwebNotificationService.logError(e)})},e.prototype.refreshTree=function(){var e=this;if(this.modelTree=[],this.selectedRule=null,this.selectedModel=null,this.appState.isDirty=!1,0==this.user.roles.length||!this.user.isReader())return this.globalFilterState.presetDateRanges=!0,this.globalFilterState.startDt=!0,void(this.globalFilterState.endDt=!0);this.globalFilterState.presetDateRanges=!1,this.globalFilterState.startDt=!1,this.globalFilterState.endDt=!1,this.load_models.show();var t=this.AutoTopicService.getModels(this.filterPreferences.channel,this.filterPreferences.namespace).finally(function(){e.load_models.hide(),t.unsubscribe()}).subscribe(function(t){t.sort(function(e,t){return e.isReference==t.isReference?e.alias.localeCompare(t.alias):e.isReference?1:-1}),t.forEach(function(t){console.log(t.alias),e.modelTree.push({id:t.name,modelId:t.name,name:t.alias,hasChildren:!0,path:t.alias,isReference:t.isReference})}),e.tree.treeModel.update(),e.tree.sizeChanged(),e.tree.treeModel.expandedNodes.length>0&&e.tree.treeModel.expandedNodes.forEach(function(t){e.doLoadRulesForNode(t)})},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.ngOnDestroy=function(){this.routeSubscription.unsubscribe(),this.appStateSubscription.unsubscribe()},e.prototype.treeNodeClickHandler=function(e,t,n){t.isRoot||(this.appState.isDirty?confirm("You have unsaved changes. Do you want to Leave?")&&t.setIsActive(!0):t.setIsActive(!0))},e.prototype.showGlobalFilter=function(){this.appState.isDirty&&!confirm("You have unsaved changes. Do you want to Leave?")||this.filterModal.show()},e.prototype.getNodeIconClass=function(e){return this.findRootNode(e).data.isReference?"glyphicon glyphicon-asterisk":""},e.prototype.findRootNode=function(e){for(;!e.isRoot;)e=e.parent;return e},e.prototype.buildTreeForModel=function(e,t,n,i){var o=t.length,r=t.shift();if(void 0!==r)if(void 0===e.children&&(e.children=[]),o>1){var a=re.find(e.children,function(e){return e.name==r});void 0===a&&(a={name:r},e.children.push(a)),this.buildTreeForModel(a,t,n,i)}else e.children.push({modelId:i,name:r,path:n})},e.prototype.treeNodeSelected=function(e){if(!e.node.isRoot){this.loadingTopicToText&&(this.loadingTopicToText.unsubscribe(),this.loadingTopicToText=null),this.activeModelId=e.node.data.modelId,this.activeModelRulePath=e.node.data.path;for(var t=e.node;!t.isRoot;)t=t.parent;this.selectedModel=t,this.getActiveModelDetails()}},e.prototype.getActiveModelDetails=function(){var e=this,t=this.AutoTopicService.getModelRules(this.activeModelId,this.activeModelRulePath).finally(function(){return t.unsubscribe()}).subscribe(function(t){e.selectedRule=t,setTimeout(function(){e.appStateServive.setDirty(!1)},200)},function(t){t.activeModelId=e.activeModelId,t.activeModelRulePath=e.activeModelRulePath,e.lexwebNotificationService.logError(t)},function(){})},e.prototype.treeNodeExpanded=function(e){e.node.isRoot&&e.isExpanded&&this.doLoadRulesForNode(e.node)},e.prototype.doLoadRulesForNode=function(e){var t=this;console.log(e.id),e.hasChildren&&!re.isUndefined(e.children)&&(e.data.children=void 0);var n=e.displayField,i=e.id,o=this.AutoTopicService.getModel(n,!1).finally(function(){return o.unsubscribe()}).subscribe(function(o){if(o.length>1){var r=o;e.data.etag=r.etag;var a=re.find(t.tree.treeModel.nodes,function(e){return e.name.toLowerCase()===n.toLowerCase()}),s=o;s.sort(),s.forEach(function(e){if(e.toLowerCase().startsWith(n.toLowerCase())){var o=e.split("|");o.shift(),t.buildTreeForModel(a,o,e,i)}}),t.modelTree=t.modelTree}else e.setIsExpanded(!1);t.tree.treeModel.update()},function(e){e.currentNodeName=n,t.lexwebNotificationService.logError(e)},function(){})},e.prototype.refreshCurrentModel=function(e){this.getActiveModelDetails()},e}();Ie([Object(o._17)(d.a),Fe("design:type","function"==typeof(Oe="undefined"!=typeof d.a&&d.a)&&Oe||Object)],Ae.prototype,"tree",void 0),Ie([Object(o._17)("loadermodels"),Fe("design:type","function"==typeof(Re="undefined"!=typeof ce&&ce)&&Re||Object)],Ae.prototype,"load_models",void 0),Ie([Object(o._17)("filterModal"),Fe("design:type","function"==typeof(je="undefined"!=typeof we&&we)&&je||Object)],Ae.prototype,"filterModal",void 0),Ae=Ie([Object(o.o)({selector:"app-auto-topic",template:n("KNcP"),styles:[n("S6ra")]}),Ee(7,Object(o.B)(ge.a)),Fe("design:paramtypes",["function"==typeof(Se="undefined"!=typeof F&&F)&&Se||Object,"function"==typeof(ke="undefined"!=typeof u.a&&u.a)&&ke||Object,"function"==typeof(Ne="undefined"!=typeof M&&M)&&Ne||Object,"function"==typeof(Me="undefined"!=typeof y&&y)&&Me||Object,"function"==typeof(De="undefined"!=typeof w&&w)&&De||Object,"function"==typeof(_e="undefined"!=typeof Z&&Z)&&_e||Object,"function"==typeof(Ce="undefined"!=typeof C&&C)&&Ce||Object,"function"==typeof(Te="undefined"!=typeof ge.StorageService&&ge.StorageService)&&Te||Object])],Ae);var Pe,Ue,We,Ve,Le=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ke=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},He=function(){function e(e,t){this.autoTopicService=e,this.lexwebNotificationService=t,this.onComplete=new o.x,this.adminRoleName="admin",this.writerRoleName="writer",this.readerRoleName="reader",this.noRoleName="none",this.user={},this.roles=[{id:0,name:this.readerRoleName},{id:1,name:this.writerRoleName},{id:2,name:this.adminRoleName},{id:3,name:this.noRoleName}],this.selectedChannel={channel:null,namespaces:[]}}return e.prototype.ngOnInit=function(){},e.prototype.show=function(e,t,n){var i=this;this.dataSources=t,this.adminDataSources=[],this.isEdit=n,re.each(re.unique(re.pluck(this.adminUser.roles.filter(function(e){return e.admin}),"channel")),function(t){var n=[];re.each(this.adminUser.roles.filter(function(e){return e.channel===t}),function(i){if(e){var o=e.roles.find(function(e){return e.channel===t&&e.namespace===i.namespace});o?n.push({name:i.namespace,role:this.getHighestRole(o)}):n.push({name:i.namespace,role:this.noRoleName})}else n.push({name:i.namespace,role:this.noRoleName})},this),this.adminDataSources.push({channel:t,namespaces:n,visible:!1})},this),this.defaultAndAdminDataSources=Object.assign([{}],this.adminDataSources),n?(this.user=e,this.username=e.email.split("@")[0],this.defaultChannel=e.roles.find(function(e){return e.default})||e.roles[0],this.selectedChannel=this.dataSources.find(function(e){return e.channel===i.defaultChannel.channel}),re.find(this.adminDataSources,function(e){return e.channel===this.defaultChannel.channel},this)||(this.selectedChannel.namespaces=[{name:this.defaultChannel.namespace}],this.defaultAndAdminDataSources.push(this.selectedChannel))):(this.defaultChannel=Object.assign({},this.defaultAndAdminDataSources[0]),this.username=null,this.selectedChannel=this.dataSources.find(function(e){return e.channel===i.defaultChannel.channel}),this.user={email:null,roles:[]}),this.userModal.show()},e.prototype.getHighestRole=function(e){return e.admin?this.adminRoleName:e.writer?this.writerRoleName:e.reader?this.readerRoleName:this.noRoleName},e.prototype.populateNamespaceDropdown=function(e){this.selectedChannel=this.dataSources.find(function(t){return t.channel===e.currentTarget.selectedOptions[0].innerText.trim()}),this.defaultChannel.channel=e.currentTarget.selectedOptions[0].innerText.trim(),this.defaultChannel.namespace=this.selectedChannel.namespaces[0].name,this.updateDefaultDatasource(this.user,null)},e.prototype.saveUser=function(e){var t=this;(this.isEdit||(e.email=this.username+"@starbucks.com"),0===e.roles.length)?e.roles.push({reader:!1,writer:!1,admin:!1,channel:this.adminDataSources[0].channel,namespace:this.adminDataSources[0].namespaces[0].name,default:!0}):!e.roles.find(function(e){return e.default})&&e.roles.length>0&&(e.roles[0].default=!0);this.autoTopicService.saveUser(e).subscribe(function(e){t.onComplete.emit(),t.userModal.hide()},function(e){return t.lexwebNotificationService.logError(e)},function(){})},e.prototype.updateRole=function(e,t,n,i){var o=t.roles.find(function(e){return e.channel===n&&e.namespace===i}),r=e.currentTarget.selectedOptions[0].innerText.trim();o?(o.reader=!1,o.writer=!1,o.admin=!1,e.currentTarget.selectedOptions[0].innerText.trim()!==this.noRoleName&&(o[r]=!0)):t.roles.push({reader:r===this.readerRoleName,writer:r===this.writerRoleName,admin:r===this.adminRoleName,channel:n,namespace:i})},e.prototype.updateDefaultDatasource=function(e,t){var n=this,i=e.roles.find(function(e){return e.default});i&&(i.default=!1);var o=t?t.currentTarget.selectedOptions[0].innerText.trim():this.defaultChannel.namespace;(i=e.roles.find(function(e){return e.channel===n.defaultChannel.channel&&e.namespace===o}))?i.default=!0:e.roles.push({reader:!1,writer:!1,admin:!1,channel:this.defaultChannel.channel,namespace:this.defaultChannel.namespace,default:!0})},e.prototype.cancelUpdate=function(){this.onComplete.emit(),this.userModal.hide()},e.prototype.usernameError=function(){return this.username&&this.username.indexOf("@")>-1},e}();Le([Object(o._17)("userModal"),Ke("design:type",Object)],He.prototype,"userModal",void 0),Le([Object(o.F)(),Ke("design:type","function"==typeof(Pe="undefined"!=typeof f&&f)&&Pe||Object)],He.prototype,"adminUser",void 0),Le([Object(o.U)(),Ke("design:type","function"==typeof(Ue="undefined"!=typeof o.x&&o.x)&&Ue||Object)],He.prototype,"onComplete",void 0),He=Le([Object(o.o)({selector:"app-user-modal",template:n("kElZ"),styles:[n("D5WY")]}),Ke("design:paramtypes",["function"==typeof(We="undefined"!=typeof F&&F)&&We||Object,"function"==typeof(Ve="undefined"!=typeof Z&&Z)&&Ve||Object])],He);var ze,Ye,Be,$e,qe,Ze,Ge,Qe=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Xe=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Je=function(){function e(e,t,n,i,o,r){this.route=e,this.autoTopicService=t,this.lexwebNotificationService=n,this.userService=i,this.filterService=o,this.serverConfigService=r,this.dataSources=[],this.columns=["User","",""],this.numberChannels=0,this.roles=[{id:0,name:"reader"},{id:1,name:"writer"},{id:2,name:"admin"}]}return e.prototype.ngOnInit=function(){var e=this;this.userList=[],this.routeSubscription=this.route.data.subscribe(function(t){e.adminUser=new f(t.user),e.userService.setUser(e.adminUser),e.serverConfig=t.config,e.serverConfigService.setConfig(e.serverConfig)},function(t){return e.lexwebNotificationService.logError(t)},function(){});var t=new p(null,null,S.defaultDateRange,this.adminUser);this.filterService.setFilter(t),this.getUsers(),this.channelSubscription=this.autoTopicService.getChannels().subscribe(function(t){var n=e;t.forEach(function(e){n.dataSources.push({channel:e,namespaces:[]}),n.getNamespaces(e)})},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.getUsers=function(){var e=this;this.userManagementSubscription=this.autoTopicService.getAllUsers().finally(function(){return e.userList.sort(function(e,t){return e.email.localeCompare(t.email)})}).subscribe(function(t){return e.userList=t},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.getNamespaces=function(e){var t=this,n=this;this.columns=[],this.autoTopicService.getNamespaces(e).subscribe(function(t){t.forEach(function(t){n.dataSources.find(function(t){return t.channel===e}).namespaces.push({name:t,role:null})})},function(e){return t.lexwebNotificationService.logError(e)},function(){})},e.prototype.deleteUser=function(e){var t=this,n=this;this.autoTopicService.deleteUser(e.email).subscribe(function(t){n.userList=n.userList.filter(function(t){return t.email!==e.email})},function(e){return t.lexwebNotificationService.logError(e)},function(){})},e.prototype.createUser=function(){this.userModal.show(null,this.dataSources,!1)},e.prototype.editUser=function(e){var t=this.userList.find(function(t){return t.email===e.email});this.userModal.show(t,this.dataSources,!0)},e}();Qe([Object(o._17)("userModal"),Xe("design:type","function"==typeof(ze="undefined"!=typeof He&&He)&&ze||Object)],Je.prototype,"userModal",void 0),Je=Qe([Object(o.o)({selector:"app-user-management",template:n("KhvR"),styles:[n("ozuw")]}),Xe("design:paramtypes",["function"==typeof(Ye="undefined"!=typeof u.a&&u.a)&&Ye||Object,"function"==typeof(Be="undefined"!=typeof F&&F)&&Be||Object,"function"==typeof($e="undefined"!=typeof Z&&Z)&&$e||Object,"function"==typeof(qe="undefined"!=typeof M&&M)&&qe||Object,"function"==typeof(Ze="undefined"!=typeof y&&y)&&Ze||Object,"function"==typeof(Ge="undefined"!=typeof C&&C)&&Ge||Object])],Je);var et,tt,nt,it,ot,rt,at,st,ct,lt,dt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},ut=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pt=function(){function e(e,t,n,i,o){var r=this;this.appStateServive=e,this.userService=t,this.serverConfigService=n,this.lexwebNotificationService=i,this.route=o,this.loadAPI=new Promise(function(e){r.loadScript(),e(!0)})}return e.prototype.ngOnInit=function(){var e=this;this.routeSubscription=this.route.data.subscribe(function(t){e.user=new f(t.user),e.userService.setUser(e.user),e.serverConfig=t.config,e.serverConfigService.setConfig(e.serverConfig)},function(t){return e.lexwebNotificationService.logError(t)},function(){}),this.appStateSubscription=this.appStateServive.getState().subscribe(function(t){return e.appState=t},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.loadScript=function(){for(var e=[window.location.origin+"/js/d3.js",window.location.origin+"/js/d3.layout.js",window.location.origin+"/js/d3.custom.js"],t=0;t<e.length;t++){var n=document.createElement("script");n.src=e[t],n.type="text/javascript",n.async=!1,n.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(n)}},e.prototype.ngOnDestroy=function(){this.routeSubscription.unsubscribe(),this.appStateSubscription.unsubscribe()},e}(),ft=[{path:"",component:Ae,resolve:{user:ee,config:oe}},{path:"treeView",component:pt=dt([Object(o.o)({selector:"app-tree-view",template:n("D3Q/"),styles:[n("eK69")],encapsulation:o._20.None}),ut("design:paramtypes",["function"==typeof(et="undefined"!=typeof w&&w)&&et||Object,"function"==typeof(tt="undefined"!=typeof M&&M)&&tt||Object,"function"==typeof(nt="undefined"!=typeof C&&C)&&nt||Object,"function"==typeof(it="undefined"!=typeof Z&&Z)&&it||Object,"function"==typeof(ot="undefined"!=typeof u.a&&u.a)&&ot||Object])],pt),resolve:{user:ee,config:oe}},{path:"users",component:Je,resolve:{user:ee,config:oe}},{path:"**",component:l}],ht=n("NVOs"),bt=n("u8XI"),mt=n("DqqP"),gt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},vt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},yt=n("7YgM").version,xt=function(){function e(e,t,n,i,o){this.userService=e,this.lexwebNotificationService=t,this.serverConfigService=n,this.router=i,this.route=o,this.environmentName=S.envName,this.appVersion=yt}return e.prototype.ngOnInit=function(){var e=this;this.userSubscription=this.userService.getUser().subscribe(function(t){return e.user=t},function(t){return e.lexwebNotificationService.logError(t)},function(){}),this.serverConfigSubscription=this.serverConfigService.getConfig().subscribe(function(t){return e.serverConfig=t},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.openKibana=function(){window.open(this.serverConfig.kibanaUrl)},e.prototype.redirectToUserManagement=function(){window.location.href="/users"},e.prototype.redirectToTreeView=function(){this.router.navigate(["treeView"])},e.prototype.toggleEditMode=function(){var e=this.user.isWriter()||this.user.isAdmin()?"reader":"writer";window.location.href="/?setRole="+e},e.prototype.getEditModeText=function(){return this.user.isWriter()?"Disable Edits":"Enable Edits"},e.prototype.getChannelNamespaceText=function(){return this.user&&this.user.role&&this.user.role.channel&&this.user.role.namespace?this.user.role.channel+" | "+this.user.role.namespace:""},e.prototype.logout=function(){this.userService.resetUser(),window.location.href=this.serverConfig.signoutUrl},e.prototype.ngOnDestroy=function(){this.userSubscription.unsubscribe(),this.serverConfigSubscription.unsubscribe()},e}();xt=gt([Object(o.o)({selector:"app-navigation",template:n("RUz+"),styles:[n("lpFi")]}),vt("design:paramtypes",["function"==typeof(rt="undefined"!=typeof M&&M)&&rt||Object,"function"==typeof(at="undefined"!=typeof Z&&Z)&&at||Object,"function"==typeof(st="undefined"!=typeof C&&C)&&st||Object,"function"==typeof(ct="undefined"!=typeof u.b&&u.b)&&ct||Object,"function"==typeof(lt="undefined"!=typeof u.a&&u.a)&&lt||Object])],xt);var wt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ot=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rt=function(){function e(){this.compName="Lexweb",console.log(this.compName+" - constructor")}return e.prototype.ngOnInit=function(){this.lexwebVersion="1.0",console.log(this.compName+" - ngOninit - version="+this.lexwebVersion)},e}();Rt=wt([Object(o.o)({selector:"app-footer",template:n("f6ft"),styles:[n("6Xpf")]}),Ot("design:paramtypes",[])],Rt);var jt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},St=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();kt=jt([Object(o.o)({selector:"app-home",template:n("ljLh"),styles:[n("HcJU")]}),St("design:paramtypes",[])],kt);var Nt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Mt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Dt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Dt=Nt([Object(o.o)({selector:"app-about",template:n("4QKn"),styles:[n("8yE1")]}),Mt("design:paramtypes",[])],Dt);var _t=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ct=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Tt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Tt=_t([Object(o.o)({selector:"app-contact",template:n("Vvj7"),styles:[n("S1Wk")]}),Ct("design:paramtypes",[])],Tt);var It=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ft=function(){return function(){this.title="app"}}();Ft=It([Object(o.o)({selector:"app-root",template:n("5xMp"),styles:[n("okgc")]})],Ft);var Et=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},At=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Pt=Et([Object(o.o)({selector:"app-404",template:n("tR4B"),styles:[n("02wv")]}),At("design:paramtypes",[])],Pt);var Ut,Wt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Vt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lt=function(){function e(){this.visible=!1,this.onVisible=new o.x}return e.prototype.ngOnInit=function(){},e.prototype.toggleContent=function(){this.visible=!this.visible,this.onVisible.emit(this.visible)},e}();Wt([Object(o.F)(),Vt("design:type",Boolean)],Lt.prototype,"visible",void 0),Wt([Object(o.U)(),Vt("design:type","function"==typeof(Ut="undefined"!=typeof o.x&&o.x)&&Ut||Object)],Lt.prototype,"onVisible",void 0),Lt=Wt([Object(o.o)({selector:"collapsible-well",template:n("mnsA"),styles:[n("soBZ")]}),Vt("design:paramtypes",[])],Lt);var Kt,Ht,zt=n("OtTB"),Yt=n("xpih"),Bt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},$t=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qt=function(){function e(e){var t=this;this.filterService=e,this.subscription=this.filterService.getFilter().subscribe(function(e){t.filter=e})}return e.prototype.ngOnInit=function(){this.filterService.refreshAll()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.submitSettings=function(){this.filterService.setFilter(this.filter)},e}();Bt([Object(o.F)(),$t("design:type","function"==typeof(Kt="undefined"!=typeof p&&p)&&Kt||Object)],qt.prototype,"filter",void 0),qt=Bt([Object(o.o)({selector:"user-profile",template:n("SnkB"),styles:[n("5lc3")]}),$t("design:paramtypes",["function"==typeof(Ht="undefined"!=typeof y&&y)&&Ht||Object])],qt);var Zt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Gt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Qt=function(){function e(){this.onConfirm=new o.x,this.text="",this.buttonStyle="btn btn-default",this.confirmStyle="btn btn-warning",this.currentStyle="",this.currentText="",this.STATE_NEW=0,this.STATE_CLICKED=1,this.currentState=this.STATE_NEW,this.timeoutRef=null}return e.prototype.ngOnInit=function(){this.currentText=this.text,this.currentStyle=this.buttonStyle},e.prototype.clicked=function(){if(this.currentState===this.STATE_NEW){event.stopPropagation(),this.currentState=this.STATE_CLICKED,this.currentStyle=this.confirmStyle,this.currentText="Confirm?",clearTimeout(this.timeoutRef);var e=this.resetState.bind(this);this.timeoutRef=setTimeout(e,3250)}else this.currentState===this.STATE_CLICKED&&(this.onConfirm.emit(),this.resetState())},e.prototype.resetState=function(){clearTimeout(this.timeoutRef),this.currentText=this.text,this.currentState=this.STATE_NEW,this.currentStyle=this.buttonStyle,this.timeoutRef=null},e}();Zt([Object(o.U)(),Gt("design:type",Object)],Qt.prototype,"onConfirm",void 0),Zt([Object(o.F)(),Gt("design:type",String)],Qt.prototype,"text",void 0),Zt([Object(o.F)(),Gt("design:type",String)],Qt.prototype,"buttonStyle",void 0),Zt([Object(o.F)(),Gt("design:type",String)],Qt.prototype,"confirmStyle",void 0),Zt([Object(o.F)(),Gt("design:type",String)],Qt.prototype,"currentStyle",void 0),Qt=Zt([Object(o.o)({selector:"confirm-button",template:n("TqyR"),styles:[n("KQYc")]}),Gt("design:paramtypes",[])],Qt);var Xt,Jt=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},en=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},tn=function(){function e(e){var t=this;this.injector=e,this.injector.get(C).getConfig().subscribe(function(e){return t.config=e},function(e){return console.log(e)},function(){})}return e.prototype.handleError=function(e){var t=this.injector.get(F);"TypeError"!=e.name||e._body||(e._body={name:e.name,number:e.number,message:e.message,stack:e.stack,description:e.description}),t.postNodeError(e).subscribe(function(t){return console.log("Node error logged:",t,e)},function(e){return console.log(e)},function(){}),console.error("It happens: ",e.message)},e}();tn=Jt([Object(o.C)(),en("design:paramtypes",["function"==typeof(Xt="undefined"!=typeof o.E&&o.E)&&Xt||Object])],tn);var nn,on,rn,an,sn,cn,ln,dn=n("WLu3"),un=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},pn=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},fn=function(){function e(e,t,n,i){var o=this;this.autoTopicService=e,this.contextMenuService=t,this.filterService=n,this.lexwebNotificationService=i,this.actionMapping={mouse:{contextMenu:this.treeNodeRightClicked.bind(this),click:this.treeNodeClickHandler.bind(this)}},this.searchTreeOptions={actionMapping:this.actionMapping,allowDrag:!1,allowDrop:!1,useVirtualScroll:!0,nodeHeight:22},this.searchModelTree=[],this.filterSubscription=this.filterService.getFilter().subscribe(function(e){o.filter=e})}return e.prototype.ngOnInit=function(){},e.prototype.show=function(){this.searchText=null,this.resetTree(),this.searchModal.show(),this.visitedNodes=null},e.prototype.resetTree=function(){this.searchModelTree=[],this.modelRule=null},e.prototype.search=function(){this.noResults=!1,this.visitedNodes=null,this.hasUnvisitedNodes=!1,this.loaderSearch.show(),this.resetTree();var e=this,t=this.autoTopicService.searchModels(this.searchText,this.filter.channel,this.filter.namespace).finally(function(){e.loaderSearch.hide(),t.unsubscribe()}).subscribe(function(t){if(e.noResults=0==t.length,0!=t.length){e.visitedNodes=[],e.fullyVisitedNodes=[],e.hasUnvisitedNodes=!0,e.arrangeIntoTree(t,e.searchText),e.tree.treeModel.expandedNodeIds={},e.tree.treeModel.activeNodeIds={},e.tree.treeModel.update(),e.tree.sizeChanged();var n=e.findNextOccurrence(e.tree.treeModel.getFirstRoot());n&&(n.setActiveAndVisible(),e.modelRule=n.data)}},function(t){return e.lexwebNotificationService.logError(t)})},e.prototype.arrangeIntoTree=function(e,t){var n=this.searchModelTree,i=0;re.each(e,function(e){var o,r=e.path.split("|"),a=n;re.each(r,function(t){var n=re.findWhere(a,{name:t});if(n)a=n.children,o=n;else{var r={id:t+i,modelId:t,name:t,children:[],path:e.path.substring(0,e.path.lastIndexOf(t)+t.length),isReference:e.isReference};i++,a.push(r),a=r.children,o=r}});try{var s=new RegExp(t,"gi");re.each(e.constraints,function(e){e.andWords1&&(e.keywords+=e.keywords?" AND "+e.andWords1:e.andWords1),e.andWords2&&(e.keywords+=e.keywords?" AND "+e.andWords2:e.andWords2),e.keywords=e.keywords.replace(s,'<span class="highlight-found">'+t+"</span>"),e.notWords=e.notWords.replace(s,'<span class="highlight-found">'+t+"</span>")})}catch(e){}o.constraints=e.constraints})},e.prototype.getName=function(e,t){return t++,e.name?e.name:"Topic"+t},e.prototype.treeNodeClickHandler=function(e,t,n){t.setIsActive(!0),this.visitedNodes.push(this.tree.treeModel.getFocusedNode().id)},e.prototype.treeNodeSelected=function(e){this.modelRule=e.node.data},e.prototype.treeNodeRightClicked=function(e,t,n){this.contextMenuService.show.next({contextMenu:this.searchTreeMenu,event:n,item:t}),n.preventDefault(),n.stopPropagation()},e.prototype.isReferenceAllowed=function(e){return e.data.isReference&&e.path.length>1},e.prototype.copy=function(e){this.verifyModal.show(e.item.data.path)},e.prototype.copyByReference=function(e){var t,n,i=e.item.data.path.split("|"),o=i[0];if(i.length>2){var r=e.item.data.path.indexOf("|")+1,a=e.item.data.path.lastIndexOf("|");t=e.item.data.path.substring(r,a),n=i[i.length-1]}else n=i[1],t="root";var s='_catRef:[model:"'+o+'" path:"'+t+'" node:"'+n+'"]';dn.Clipboard.copy(s)},e.prototype.removeFromFullyVisitedNodes=function(e){var t=this.tree.treeModel.getNodeById(e);return t.parent.displayField?(this.fullyVisitedNodes=re.without(this.fullyVisitedNodes,t.parent.id),this.removeFromFullyVisitedNodes(t.parent.id)):void 0},e.prototype.previousNode=function(){var e=this.tree.treeModel.getNodeById(this.visitedNodes.pop());e.setActiveAndVisible(),this.removeFromFullyVisitedNodes(e.id),this.modelRule=e.data,this.hasUnvisitedNodes=!0},e.prototype.nextNode=function(){this.visitedNodes.push(this.tree.treeModel.getFocusedNode().id);var e=this.findNextOccurrence(this.tree.treeModel.getFocusedNode());e?(e.setActiveAndVisible(),this.modelRule=e.data):this.hasUnvisitedNodes=!1},e.prototype.foundInArray=function(e,t){return null!=re.find(t,function(t){return t==e})},e.prototype.findNextOccurrence=function(e){if(!e||!e.displayField)return null;this.tree.treeModel.setExpandedNode(e,!0);var t=this;if(e.data&&e.data.constraints&&!this.foundInArray(e.id,this.visitedNodes))return e;if(e.hasChildren&&!this.foundInArray(e.id,this.fullyVisitedNodes)){var n=re.find(e.children,function(e){return!t.foundInArray(e.id,t.visitedNodes)});if(n&&!this.foundInArray(n.id,this.fullyVisitedNodes))return this.findNextOccurrence(n);var i,o=re.find(e.children,function(e){return e.data&&e.data.constraints&&!t.foundInArray(e.id,t.visitedNodes)});return o||(this.fullyVisitedNodes.push(e.id),!(i=e.findNextSibling(!0))||this.foundInArray(i.id,this.visitedNodes)||this.foundInArray(i.id,this.fullyVisitedNodes)?this.findNextOccurrence(e.parent):this.findNextOccurrence(i))}return this.fullyVisitedNodes.push(e.id),!(i=e.findNextSibling(!0))||this.foundInArray(i.id,this.visitedNodes)||this.foundInArray(i.id,this.fullyVisitedNodes)?this.findNextOccurrence(e.parent):this.findNextOccurrence(i)},e}();un([Object(o._17)("searchModal"),pn("design:type",Object)],fn.prototype,"searchModal",void 0),un([Object(o._17)("searchTreeMenu"),pn("design:type","function"==typeof(nn="undefined"!=typeof mt.a&&mt.a)&&nn||Object)],fn.prototype,"searchTreeMenu",void 0),un([Object(o._17)(d.a),pn("design:type","function"==typeof(on="undefined"!=typeof d.a&&d.a)&&on||Object)],fn.prototype,"tree",void 0),un([Object(o._17)("loaderSearch"),pn("design:type","function"==typeof(rn="undefined"!=typeof ce&&ce)&&rn||Object)],fn.prototype,"loaderSearch",void 0),un([Object(o._17)("verifyModal"),pn("design:type",Object)],fn.prototype,"verifyModal",void 0),fn=un([Object(o.o)({selector:"app-model-search-modal",template:n("nwnM"),styles:[n("yYYQ")]}),pn("design:paramtypes",["function"==typeof(an="undefined"!=typeof F&&F)&&an||Object,"function"==typeof(sn="undefined"!=typeof mt.c&&mt.c)&&sn||Object,"function"==typeof(cn="undefined"!=typeof y&&y)&&cn||Object,"function"==typeof(ln="undefined"!=typeof Z&&Z)&&ln||Object])],fn);var hn,bn,mn,gn,vn,yn,xn,wn,On=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Rn=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jn=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},Sn=function(){function e(e,t,n,i,r){this.autoTopicService=e,this.filterService=t,this.lexwebNotificationService=n,this.userService=i,this.storage=r,this.onDataSourceUpdated=new o.x}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.filterService.getFilter().subscribe(function(t){return e.filter=t},function(t){return e.lexwebNotificationService.logError(t)},function(){})},e.prototype.show=function(){this.dataSourceModal.show()},e.prototype.channelSelected=function(){this.filter.setNamespaces(this.user.roles),this.filter.namespace=this.filter.namespaces[0]},e.prototype.updateUserRole=function(){var e=this;this.user.role=this.user.roles.find(function(t){return t.channel===e.filter.channel&&t.namespace===e.filter.namespace}),this.userService.setUser(this.user)},e.prototype.getTaxonomy=function(){var e=this;if(""!==this.filter.channel&&""!==this.filter.namespace&&this.user.isReader())var t=this.autoTopicService.getStructuredDataTaxonomy(this.filter,!0).finally(function(){return t.unsubscribe()}).subscribe(function(t){e.filter.structuredDataTaxonomy=t,e.filterService.setFilter(e.filter)},function(t){return e.lexwebNotificationService.logError(t)},function(){});else this.filter.structuredDataTaxonomy=null,this.filterService.setFilter(this.filter)},e.prototype.updateFilter=function(e){e.dirty&&(this.updateUserRole(),this.getTaxonomy(),this.persistSettings&&(this.storage.set(S.channelKey,this.filter.channel),this.storage.set(S.namespaceKey,this.filter.namespace),this.persistSettings=!1),this.onDataSourceUpdated.emit()),this.dataSourceModal.hide()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e}();On([Object(o.F)(),Rn("design:type","function"==typeof(hn="undefined"!=typeof p&&p)&&hn||Object)],Sn.prototype,"filter",void 0),On([Object(o.F)(),Rn("design:type","function"==typeof(bn="undefined"!=typeof f&&f)&&bn||Object)],Sn.prototype,"user",void 0),On([Object(o.U)(),Rn("design:type","function"==typeof(mn="undefined"!=typeof o.x&&o.x)&&mn||Object)],Sn.prototype,"onDataSourceUpdated",void 0),On([Object(o._17)("dataSourceModal"),Rn("design:type",Object)],Sn.prototype,"dataSourceModal",void 0),Sn=On([Object(o.o)({selector:"data-source-modal",template:n("HF1G"),styles:[n("L6Yk")]}),jn(4,Object(o.B)(ge.a)),Rn("design:paramtypes",["function"==typeof(gn="undefined"!=typeof F&&F)&&gn||Object,"function"==typeof(vn="undefined"!=typeof y&&y)&&vn||Object,"function"==typeof(yn="undefined"!=typeof Z&&Z)&&yn||Object,"function"==typeof(xn="undefined"!=typeof M&&M)&&xn||Object,"function"==typeof(wn="undefined"!=typeof ge.StorageService&&ge.StorageService)&&wn||Object])],Sn);var kn,Nn=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Mn=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Dn=function(){function e(){this.hideFilter={channels:!0,namespaces:!0,states:!1,presetDateRanges:!1,location:!1,startDt:!1,endDt:!1}}return e.prototype.ngOnInit=function(){},e.prototype.getConstraintNames=function(){var e=[];return this.modelRule.constraints.forEach(function(t){return e.push(t.name)}),e},e.prototype.ngAfterViewInit=function(){},e}();Nn([Object(o.F)(),Mn("design:type",(!1,Object))],Dn.prototype,"modelRule",void 0),Nn([Object(o.F)(),Mn("design:type",Object)],Dn.prototype,"model",void 0),Nn([Object(o.F)(),Mn("design:type",(!1,Object))],Dn.prototype,"filter",void 0),Nn([Object(o.F)(),Mn("design:type",(!1,Object))],Dn.prototype,"hideFilter",void 0),Nn([Object(o.F)(),Mn("design:type",String)],Dn.prototype,"jobId",void 0),Nn([Object(o.F)(),Mn("design:type","function"==typeof(kn="undefined"!=typeof f&&f)&&kn||Object)],Dn.prototype,"user",void 0),Dn=Nn([Object(o.o)({selector:"app-auto-topic-rule-detail",template:n("TWZi"),styles:[n("DFgO")],encapsulation:o._20.None}),Mn("design:paramtypes",[])],Dn);var _n,Cn=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Tn=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},In=function(){function e(e){this.appStateService=e,this.visible=!1,this.maxConstraintLength=S.maxTopicLength}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.appStateService.getState().subscribe(function(t){e.appState=t}),this.setLocals()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.headerControlsClicked=function(){event.stopPropagation()},e.prototype.refreshCodeMirror=function(){var e=this;setTimeout(function(){e.includesmall.instance.refresh(),e.excludesmall.instance.refresh(),e.includelarge.instance.refresh(),e.excludelarge.instance.refresh()},100)},e.prototype.toggleVisible=function(e){this.visible=e,this.refreshCodeMirror()},e.prototype.setDirty=function(){this.appState&&this.appState.isDirty||this.appStateService.setDirty(!0)},e.prototype.hide=function(e){var t=this;this.constraint.name!=this.originalConstraintName&&(e.invalid||this.constraintNamesString.split(",").find(function(e){return e==t.constraint.name}))?(alert("name may already be in use, or invalid => reverted to original name, please try again."),e.reset({constraintName:this.originalConstraintName})):(this.constraint.name=this.constraint.name.replace(/ /g,"-").replace(/_/g,"-"),this.setLocals())},e.prototype.setLocals=function(){this.originalConstraintName=this.constraint.name,this.constraintNamesString=this.constraintNames.toString()},e}();Cn([Object(o.F)(),Tn("design:type",(!1,Object))],In.prototype,"constraint",void 0),Cn([Object(o._17)("includesmall"),Tn("design:type",Object)],In.prototype,"includesmall",void 0),Cn([Object(o._17)("excludesmall"),Tn("design:type",Object)],In.prototype,"excludesmall",void 0),Cn([Object(o._17)("includelarge"),Tn("design:type",Object)],In.prototype,"includelarge",void 0),Cn([Object(o._17)("excludelarge"),Tn("design:type",Object)],In.prototype,"excludelarge",void 0),Cn([Object(o.F)(),Tn("design:type",Boolean)],In.prototype,"visible",void 0),Cn([Object(o.F)(),Tn("design:type",Array)],In.prototype,"constraintNames",void 0),In=Cn([Object(o.o)({selector:"app-auto-topic-rule-constraint-thumbnail",template:n("OWZt"),styles:[n("PsxY"),n("D9Yb")],encapsulation:o._20.None}),Tn("design:paramtypes",["function"==typeof(_n="undefined"!=typeof w&&w)&&_n||Object])],In);var Fn,En,An,Pn,Un,Wn,Vn,Ln=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Kn=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Hn=function(){function e(e,t,n,i){var o=this;this.AutoTopicService=e,this.contextMenuService=t,this.filterService=n,this.lexwebNotificationService=i,this.actionMapping={mouse:{contextMenu:this.treeNodeRightClicked.bind(this),click:this.treeNodeClickHandler.bind(this)}},this.searchTreeOptions={actionMapping:this.actionMapping,allowDrag:!1,allowDrop:!1,useVirtualScroll:!0,nodeHeight:22},this.searchModelTree=[],this.filterSubscription=this.filterService.getFilter().subscribe(function(e){o.filter=e})}return e.prototype.ngOnInit=function(){},e.prototype.show=function(){this.searchText=null,this.resetTree(),this.searchModal.show(),this.visitedNodes=null},e.prototype.resetTree=function(){this.searchModelTree=[],this.modelRule=null},e.prototype.search=function(){this.noResults=!1,this.visitedNodes=null,this.hasUnvisitedNodes=!1,this.loaderSearch.show(),this.resetTree();var e=this,t=this.AutoTopicService.searchModels(this.searchText,this.filter.channel,this.filter.namespace).finally(function(){e.loaderSearch.hide(),t.unsubscribe()}).subscribe(function(t){if(e.noResults=0==t.length,0!=t.length){e.visitedNodes=[],e.fullyVisitedNodes=[],e.hasUnvisitedNodes=!0,e.arrangeIntoTree(t,e.searchText),e.tree.treeModel.expandedNodeIds={},e.tree.treeModel.activeNodeIds={},e.tree.treeModel.update(),e.tree.sizeChanged();var n=e.findNextOccurrence(e.tree.treeModel.getFirstRoot());n&&(n.setActiveAndVisible(),e.modelRule=n.data)}},function(t){return e.lexwebNotificationService.logError(t)})},e.prototype.arrangeIntoTree=function(e,t){var n=this.searchModelTree,i=0;re.each(e,function(e){var o,r=e.path.split("|"),a=n;re.each(r,function(t){var n=re.findWhere(a,{name:t});if(n)a=n.children,o=n;else{var r={id:t+i,modelId:t,name:t,children:[],path:e.path.substring(0,e.path.lastIndexOf(t)+t.length),isReference:e.isReference};i++,a.push(r),a=r.children,o=r}});try{var s=new RegExp(t,"g");re.each(e.constraints,function(e){e.keywords=e.keywords.replace(s,'<span class="highlight-found">'+t+"</span>"),e.notWords=e.notWords.replace(s,'<span class="highlight-found">'+t+"</span>")})}catch(e){}o.constraints=e.constraints})},e.prototype.getName=function(e,t){return t++,e.name?e.name:"Topic"+t},e.prototype.treeNodeClickHandler=function(e,t,n){t.setIsActive(!0),this.visitedNodes.push(this.tree.treeModel.getFocusedNode().id)},e.prototype.treeNodeSelected=function(e){this.modelRule=e.node.data},e.prototype.treeNodeRightClicked=function(e,t,n){this.contextMenuService.show.next({contextMenu:this.searchTreeMenu,event:n,item:t}),n.preventDefault(),n.stopPropagation()},e.prototype.isReferenceAllowed=function(e){return e.data.isReference&&e.path.length>1},e.prototype.copy=function(e){this.verifyModal.show(e.item.data.path)},e.prototype.copyByReference=function(e){var t,n,i=e.item.data.path.split("|"),o=i[0];if(i.length>2){var r=e.item.data.path.indexOf("|")+1,a=e.item.data.path.lastIndexOf("|");t=e.item.data.path.substring(r,a),n=i[i.length-1]}else n=i[1],t="root";var s='_catRef:[model:"'+o+'" path:"'+t+'" node:"'+n+'"]';dn.Clipboard.copy(s)},e.prototype.removeFromFullyVisitedNodes=function(e){var t=this.tree.treeModel.getNodeById(e);return t.parent.displayField?(this.fullyVisitedNodes=re.without(this.fullyVisitedNodes,t.parent.id),this.removeFromFullyVisitedNodes(t.parent.id)):void 0},e.prototype.previousNode=function(){var e=this.tree.treeModel.getNodeById(this.visitedNodes.pop());e.setActiveAndVisible(),this.removeFromFullyVisitedNodes(e.id),this.modelRule=e.data,this.hasUnvisitedNodes=!0},e.prototype.nextNode=function(){this.visitedNodes.push(this.tree.treeModel.getFocusedNode().id);var e=this.findNextOccurrence(this.tree.treeModel.getFocusedNode());e?(e.setActiveAndVisible(),this.modelRule=e.data):this.hasUnvisitedNodes=!1},e.prototype.foundInArray=function(e,t){return null!=re.find(t,function(t){return t==e})},e.prototype.findNextOccurrence=function(e){if(!e||!e.displayField)return null;this.tree.treeModel.setExpandedNode(e,!0);var t=this;if(e.data&&e.data.constraints&&!this.foundInArray(e.id,this.visitedNodes))return e;if(e.hasChildren&&!this.foundInArray(e.id,this.fullyVisitedNodes)){var n=re.find(e.children,function(e){return!t.foundInArray(e.id,t.visitedNodes)});if(n&&!this.foundInArray(n.id,this.fullyVisitedNodes))return this.findNextOccurrence(n);var i,o=re.find(e.children,function(e){return e.data&&e.data.constraints&&!t.foundInArray(e.id,t.visitedNodes)});return o||(this.fullyVisitedNodes.push(e.id),!(i=e.findNextSibling(!0))||this.foundInArray(i.id,this.visitedNodes)||this.foundInArray(i.id,this.fullyVisitedNodes)?this.findNextOccurrence(e.parent):this.findNextOccurrence(i))}return this.fullyVisitedNodes.push(e.id),!(i=e.findNextSibling(!0))||this.foundInArray(i.id,this.visitedNodes)||this.foundInArray(i.id,this.fullyVisitedNodes)?this.findNextOccurrence(e.parent):this.findNextOccurrence(i)},e}();Ln([Object(o._17)("searchModal"),Kn("design:type",Object)],Hn.prototype,"searchModal",void 0),Ln([Object(o._17)("searchTreeMenu"),Kn("design:type","function"==typeof(Fn="undefined"!=typeof mt.a&&mt.a)&&Fn||Object)],Hn.prototype,"searchTreeMenu",void 0),Ln([Object(o._17)(d.a),Kn("design:type","function"==typeof(En="undefined"!=typeof d.a&&d.a)&&En||Object)],Hn.prototype,"tree",void 0),Ln([Object(o._17)("loaderSearch"),Kn("design:type","function"==typeof(An="undefined"!=typeof ce&&ce)&&An||Object)],Hn.prototype,"loaderSearch",void 0),Ln([Object(o._17)("verifyModal"),Kn("design:type",Object)],Hn.prototype,"verifyModal",void 0),Hn=Ln([Object(o.o)({selector:"app-auto-topic-model-search-modal",template:n("g567"),styles:[n("9OPk")],encapsulation:o._20.None}),Kn("design:paramtypes",["function"==typeof(Pn="undefined"!=typeof F&&F)&&Pn||Object,"function"==typeof(Un="undefined"!=typeof mt.c&&mt.c)&&Un||Object,"function"==typeof(Wn="undefined"!=typeof y&&y)&&Wn||Object,"function"==typeof(Vn="undefined"!=typeof Z&&Z)&&Vn||Object])],Hn);var zn=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Yn=function(){return function(){}}();Yn=zn([Object(o.M)({declarations:[Ft,kt,l,b,Dt,Tt,xt,Rt,Pt,Lt,qt,qt,Qt,we,ce,fn,Sn,Je,He,Ae,Dn,In,Hn,pt],imports:[r.a,r.a,ht.b,j.c,O.a,d.b,a.c.forRoot(),a.b.forRoot(),a.d.forRoot(),a.a.forRoot(),zt.a,Yt.a,mt.b,bt.a,ge.c,u.c.forRoot(ft)],providers:[F,y,w,Z,O.b,{provide:o.w,useClass:tn},M,ee,C,oe],bootstrap:[Ft]})],Yn),Object(o._24)(),Object(i.a)().bootstrapModule(Yn)},yYYQ:function(e,t){e.exports=".panel-heading {\n  color: #fff !important; }\n\n.model-search-constraint:nth-child(4n+1) .panel-heading {\n  background-color: #661466; }\n\n.model-search-constraint:nth-child(4n+2) .panel-heading {\n  background-color: #991200; }\n\n.model-search-constraint:nth-child(4n+3) .panel-heading {\n  background-color: #ff6704; }\n\n.model-search-constraint:nth-child(4n+4) .panel-heading {\n  background-color: #3466cb; }\n\n/deep/ .ngx-contextmenu > .dropdown-menu {\n  z-index: 1060 !important; }\n\n.search-model-tree {\n  height: 400px; }\n\n.search-constraint-div {\n  min-width: 100%;\n  min-height: 30px;\n  max-height: 100px;\n  overflow-y: scroll;\n  border-style: solid;\n  border-width: 1px; }\n\n/deep/ .highlight-found {\n  background-color: yellow; }\n"}},[0]);